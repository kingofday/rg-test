"use strict";(self.webpackChunkregional_water=self.webpackChunkregional_water||[]).push([[5],{2580:function(i,e,n){n.d(e,{Z:function(){return Z}});var l=n(3433),t=n(9439),o=n(914),r=n(8993),a=n(458),d=n(9530),s=n(543),c=function(i){var e=i.location,n=i.entryFrm,l=i.namePrefix,o=(0,s.Z)({autoCallUrl:d.Z.locations.counties,cachingLifeTimeInSeconds:60}),r=(0,t.Z)(o,3),a=(r[0],r[1]),c=r[2],u=(0,s.Z)({cachingLifeTimeInSeconds:60,autoCallUrl:null!==e&&void 0!==e&&e.countyId?d.Z.locations.districs(null===e||void 0===e?void 0:e.countyId.toString()):void 0}),v=(0,t.Z)(u,3),f=v[0],Z=v[1],g=v[2],h=(0,s.Z)({cachingLifeTimeInSeconds:60,autoCallUrl:null!==e&&void 0!==e&&e.districtId?d.Z.locations.cities(null===e||void 0===e?void 0:e.districtId.toString()):void 0}),m=(0,t.Z)(h,3),p=m[0],x=m[1],y=m[2],I=(0,s.Z)({cachingLifeTimeInSeconds:60,autoCallUrl:null!==e&&void 0!==e&&e.districtId?d.Z.locations.ruralDistricts(null===e||void 0===e?void 0:e.districtId.toString()):void 0}),C=(0,t.Z)(I,3),j=C[0],b=C[1],S=C[2],k=(0,s.Z)({cachingLifeTimeInSeconds:60,autoCallUrl:null!==e&&void 0!==e&&e.ruralDistrictId?d.Z.locations.villages(null===e||void 0===e?void 0:e.ruralDistrictId.toString()):void 0}),w=(0,t.Z)(k,3),F=w[0],D=w[1],V=w[2];return{loadingCounties:a,counties:c,onCountyChanged:function(i){n.resetFields([l?[l,"districtId"]:"districtId",l?[l,"cityId"]:"cityId",l?[l,"ruralDistrictId"]:"ruralDistrictId",l?[l,"villageId"]:"villageId"]);n.getFieldInstance(l?[l,"districtId"]:"districtId");n.setFieldValue(l?[l,"districtId"]:"districtId",""),n.setFieldValue(l?[l,"cityId"]:"cityId",""),n.setFieldValue(l?[l,"ruralDistrictId"]:"ruralDistrictId",""),n.setFieldValue(l?[l,"villageId"]:"villageId",""),""!==i&&f.get(d.Z.locations.districs(i))},loadingDistricts:Z,districts:g,onDistrictChanged:function(i){n.resetFields([l?[l,"cityId"]:"cityId",l?[l,"ruralDistrictId"]:"ruralDistrictId",l?[l,"villageId"]:"villageId"]),n.setFieldValue(l?[l,"cityId"]:"cityId",""),n.setFieldValue(l?[l,"ruralDistrictId"]:"ruralDistrictId",""),n.setFieldValue(l?[l,"villageId"]:"villageId",""),""!==i&&(p.get(d.Z.locations.cities(i)),j.get(d.Z.locations.ruralDistricts(i)))},loadingCities:x,cities:y,getRuralDistricts:j,loadingRuralDistricts:b,ruralDistricts:S,onRuralDistrictsChanged:function(i){n.resetFields([l?[l,"villageId"]:"villageId"]),n.setFieldValue(l?[l,"villageId"]:"villageId",""),""!==i&&F.get(d.Z.locations.villages(i))},loadingVillages:D,villages:V}},u=n(2791),v=n(2020),f=n(184),Z=function(i){var e,n,d,s,Z,g=i.entryFrm,h=i.data,m=i.namePrefix,p=i.readOnly,x=i.hideIfCityIdSelected,y=(0,v.$)().t,I=c({entryFrm:g,location:h,namePrefix:m}),C=I.loadingCounties,j=I.counties,b=I.onCountyChanged,S=I.loadingDistricts,k=I.districts,w=I.onDistrictChanged,F=I.loadingCities,D=I.cities,V=I.loadingRuralDistricts,M=I.ruralDistricts,P=I.onRuralDistrictsChanged,z=I.loadingVillages,U=I.villages,E=(0,u.useState)(null===h||void 0===h?void 0:h.cityId),O=(0,t.Z)(E,2),T=O[0],A=O[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.Z,{xs:12,sm:8,md:6,children:(0,f.jsx)(r.Z.Item,{name:m?[m,"countyId"]:"countyId",label:y("county"),children:(0,f.jsx)(a.Z,{allowClear:!0,showSearch:!0,placeholder:y("county"),loading:C,onChange:b,disabled:p,options:[{label:y("selcet"),value:""}].concat((0,l.Z)(null!==(e=null===j||void 0===j?void 0:j.map((function(i){return{label:i.name,value:i.id}})))&&void 0!==e?e:[]))})})}),(0,f.jsx)(o.Z,{xs:12,sm:8,md:6,children:(0,f.jsx)(r.Z.Item,{name:m?[m,"districtId"]:"districtId",label:y("district"),children:(0,f.jsx)(a.Z,{allowClear:!0,showSearch:!0,placeholder:y("district"),loading:S,onChange:w,disabled:p,options:[{label:y("selcet"),value:""}].concat((0,l.Z)(null!==(n=null===k||void 0===k?void 0:k.map((function(i){return{label:i.name,value:i.id}})))&&void 0!==n?n:[]))})})}),(0,f.jsx)(o.Z,{xs:12,sm:8,md:6,children:(0,f.jsx)(r.Z.Item,{name:m?[m,"cityId"]:"cityId",label:y("city"),children:(0,f.jsx)(a.Z,{allowClear:!0,showSearch:!0,placeholder:y("city"),loading:F,disabled:p,onChange:A,options:[{label:y("selcet"),value:""}].concat((0,l.Z)(null!==(d=null===D||void 0===D?void 0:D.map((function(i){return{label:i.name,value:i.id}})))&&void 0!==d?d:[]))})})}),T&&x?null:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.Z,{xs:12,sm:8,md:6,children:(0,f.jsx)(r.Z.Item,{name:m?[m,"ruralDistrictId"]:"ruralDistrictId",label:y("rural"),children:(0,f.jsx)(a.Z,{allowClear:!0,showSearch:!0,placeholder:y("rural"),loading:V,onChange:P,disabled:p,options:[{label:y("selcet"),value:""}].concat((0,l.Z)(null!==(s=null===M||void 0===M?void 0:M.map((function(i){return{label:i.name,value:i.id}})))&&void 0!==s?s:[]))})})}),(0,f.jsx)(o.Z,{xs:12,sm:8,md:6,children:(0,f.jsx)(r.Z.Item,{name:m?[m,"villageId"]:"villageId",label:y("village"),children:(0,f.jsx)(a.Z,{allowClear:!0,showSearch:!0,placeholder:y("village"),loading:z,disabled:p,options:[{label:y("selcet"),value:""}].concat((0,l.Z)(null!==(Z=null===U||void 0===U?void 0:U.map((function(i){return{label:i.name,value:i.id}})))&&void 0!==Z?Z:[]))})})})]})]})}},5485:function(i,e,n){n.d(e,{Z:function(){return F}});var l=n(4942),t=n(3433),o=n(1413),r=n(9439),a=n(4916),d=n(8993),s=n(7309),c=n(294),u=n(3099),v=n(4525),f=n(4021),Z=n(4661),g=n(5486),h=n(8467),m=n(2791),p=(0,m.createContext)({}),x=n(543),y=n(2020),I=n(502),C=n(5761),j=n(184),b=function(i){var e,n=(0,y.$)().t,l=(0,x.Z)({onSuccess:function(e){i.afterSelect(e)}}),t=(0,r.Z)(l,2),o=t[0],a=t[1];return(0,j.jsx)(s.Z,{loading:a,type:i.isMobile?"ghost":"primary",shape:i.isMobile?"default":"circle",icon:i.isMobile?void 0:(0,j.jsx)(Z.Z,{size:i.isMobile?20:10,name:"IoPencilOutline"}),onClick:function(){if(i.findUrl){var e="string"===typeof i.findUrl?"".concat(i.findUrl,"?").concat(i.idProp,"=").concat(i.record[i.idProp]):i.findUrl(i.record);o.get(e)}else i.afterSelect(i.record)},title:null!==(e=n("edit"))&&void 0!==e?e:"",children:i.isMobile?n("edit"):null})},S=function(i){var e=d.Z.useForm(),n=(0,r.Z)(e,1)[0];return(0,j.jsx)(f.Z,{destroyOnClose:!0,open:!0,onCancel:i.onCancel,title:i.title,onOk:function(){n.submit()},okButtonProps:{loading:i.loading},width:i.entryModalWidth,children:(0,j.jsx)(d.Z,{id:"entry-form",layout:"vertical",form:n,initialValues:i.initialValues,onFinish:i.onEntrySubmit,autoComplete:"off",children:(0,j.jsx)(i.EntryForm,{form:n,data:i.initialValues})})})},k=function(i){var e,n=(0,y.$)().t;return(0,j.jsx)(s.Z,{danger:!0,type:i.isMobile?"ghost":"primary",shape:i.isMobile?"default":"circle",icon:i.isMobile?void 0:(0,j.jsx)(Z.Z,{size:i.isMobile?20:10,name:"IoTrashOutline"}),onClick:i.onClick,title:null!==(e=n("delete"))&&void 0!==e?e:"",children:i.isMobile?n("delete"):null})},w=a.Z.Panel,F=function(i){var e,n,F,D=i.id,V=i.title,M=i.columns,P=i.idProp,z=i.filterUrl,U=i.findUrl,E=i.addUrl,O=i.initialValues,T=i.disablePaging,A=i.EntryForm,N=i.children,R=i.deleteAction,L=i.editAction,W=i.pageSize,B=void 0===W?15:W,$=i.handleSubmit,_=void 0===$||$,K=i.customActions,Y=i.buttons,q=i.scrollX,H=void 0===q?"1500px":q,Q=i.filtersHeight,X=i.scrollY,G=i.entryModalWidth,J=i.enableRowNumber,ii=void 0===J||J,ei=(0,y.$)().t,ni=d.Z.useForm(),li=(0,r.Z)(ni,1)[0],ti=(0,m.useState)(!1),oi=(0,r.Z)(ti,2),ri=oi[0],ai=oi[1],di=(0,m.useState)(!0),si=(0,r.Z)(di,2),ci=si[0],ui=si[1],vi=(0,m.useState)(null),fi=(0,r.Z)(vi,2),Zi=fi[0],gi=fi[1],hi=(0,m.useState)(null),mi=(0,r.Z)(hi,2),pi=mi[0],xi=mi[1],yi=(0,m.useState)(M),Ii=(0,r.Z)(yi,2),Ci=Ii[0],ji=Ii[1],bi=(0,m.useState)({page:1,pageSize:B}),Si=(0,r.Z)(bi,2),ki=Si[0],wi=Si[1],Fi=(0,m.useRef)(1),Di=(0,x.Z)({initLoading:!0}),Vi=(0,r.Z)(Di,4),Mi=Vi[0],Pi=Vi[1],zi=Vi[2],Ui=Vi[3],Ei=(0,x.Z)({onSuccess:function(i,e){qi(e)}}),Oi=(0,r.Z)(Ei,2),Ti=Oi[0],Ai=Oi[1],Ni=(0,x.Z)({onSuccess:function(i,e){Hi(e?(0,o.Z)((0,o.Z)({},e),i):i)}}),Ri=(0,r.Z)(Ni,2),Li=Ri[0],Wi=Ri[1],Bi=(0,x.Z)({onSuccess:function(i,e){var n=P,l=null===e||void 0===e?void 0:e[n];l&&Ui((function(i){var e;return(0,o.Z)((0,o.Z)({},i),{},{totalEntitiesCount:null!==(e=null===i||void 0===i?void 0:i.totalEntitiesCount)&&void 0!==e?e:0,results:null===i||void 0===i?void 0:i.results.filter((function(i){return i[n]!==l}))})})),xi(null)}}),$i=(0,r.Z)(Bi,2),_i=$i[0],Ki=$i[1],Yi=(0,m.useMemo)((function(){return window.outerWidth<g.Z.breakpoints.xl}),[]),qi=function(i){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=P,l=null===i||void 0===i?void 0:i[n];l&&Ui((function(e){return(0,o.Z)((0,o.Z)({},e),{},{results:null===e||void 0===e?void 0:e.results.map((function(e){return e[n]===l?(0,o.Z)((0,o.Z)({},e),i):e}))})})),e&&ai(!1)},Hi=function(i){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=P,l=null===i||void 0===i?void 0:i[n];l&&Ui((function(e){var n,l;return(0,o.Z)((0,o.Z)({},e),{},{totalEntitiesCount:null!==(n=null===e||void 0===e?void 0:e.totalEntitiesCount)&&void 0!==n?n:1,results:[i].concat((0,t.Z)(null!==(l=null===e||void 0===e?void 0:e.results)&&void 0!==l?l:[]))})})),e&&ai(!1)},Qi=function(i){gi(i),ai(!0)},Xi=function(i){xi(i)},Gi=(0,m.useMemo)((function(){var i;if((!K||!K.length)&&!L&&!R)return null;var e=(null!==(i=null===K||void 0===K?void 0:K.length)&&void 0!==i?i:0)+(L?1:0)+(R?1:0);return{title:(0,j.jsx)(Z.Z,{name:"IoBuildOutline"}),align:"center",key:"actions",fixed:"right",width:Yi?30:25*e+8*(e-1)+40,dataIndex:"actions",render:function(i,e,n){if(Yi){var l=[];return L&&l.push({key:"edit",label:(0,j.jsx)(b,{findUrl:U,afterSelect:Qi,idProp:P,record:e,isMobile:!0})}),R&&l.push({key:"delete",label:(0,j.jsx)(k,{isMobile:!0,onClick:function(){return Xi(e)}})}),null!==K&&void 0!==K&&K.length&&(l=l.concat(K.map((function(n,l){var t;return{key:"action-"+l,label:n.renderer?n.renderer(i,e,Ui,Yi):(0,j.jsx)(s.Z,{type:Yi?"ghost":"primary",shape:Yi?"default":"circle",icon:(0,j.jsx)(Z.Z,{size:Yi?20:10,name:null!==(t=n.icon)&&void 0!==t?t:"BsDash"}),onClick:function(){var i;return null===(i=n.action)||void 0===i?void 0:i.call(n,e,Ui)}},l)}})))),(0,j.jsx)(c.Z,{menu:{items:l},children:(0,j.jsx)("a",{onClick:function(i){return i.preventDefault()},children:(0,j.jsx)(Z.Z,{name:"FaEllipsisV"})})})}return(0,j.jsxs)(u.Z,{className:"actions",children:[!!L&&(0,j.jsx)(b,{findUrl:U,afterSelect:Qi,idProp:P,record:e}),!!R&&(0,j.jsx)(k,{onClick:function(){return Xi(e)}}),!!K&&K.map((function(n,l){var t;return n.renderer?n.renderer(i,e,Ui):(0,j.jsx)(s.Z,{type:"primary",shape:"circle",icon:(0,j.jsx)(Z.Z,{size:10,name:null!==(t=n.icon)&&void 0!==t?t:"BsDash"}),onClick:function(){var i;return null===(i=n.action)||void 0===i?void 0:i.call(n,e,Ui)}},l)}))]})}}}),[K]),Ji=function(i){i.stopPropagation(),gi(null),ai(!0)},ie=function(i){Mi.get("".concat(z,"?").concat(h.Z.convertToQueryString((0,o.Z)((0,o.Z)({},ki),i)).toString()))},ee=function(){gi(null),ai(!1)};(0,m.useEffect)((function(){ie(li.getFieldsValue())}),[]);var ne=(0,m.useMemo)((function(){var i=Gi?[].concat((0,t.Z)(Ci.filter((function(i){return"rowNumber"!==i.key})).map((function(i){return(0,o.Z)((0,o.Z)({},i),{},{fixed:window.outerWidth<g.Z.breakpoints.lg?void 0:i.fixed})}))),[Gi]):Ci.filter((function(i){return"rowNumber"!==i.key}));return ii&&i.unshift({key:"rowNumber",title:"#",width:80,fixed:window.outerWidth<g.Z.breakpoints.lg?void 0:"left",render:function(i,e,n){return(0,j.jsx)("span",{children:(Fi.current-1)*ki.pageSize+n+1})}}),i}),[Ci]);return(0,j.jsx)(p.Provider,{value:{form:li},children:(0,j.jsxs)(C.Z,{id:D,title:V,className:"admin",children:[!Yi&&!!E&&(0,j.jsx)("div",{children:(0,j.jsx)(s.Z,{icon:(0,j.jsx)(Z.Z,{name:"IoAdd"}),onClick:Ji,type:"primary",size:"small",title:null!==(e=ei("add"))&&void 0!==e?e:"",children:(0,j.jsx)("small",{children:ei("add")})})}),(0,j.jsx)(a.Z,{defaultActiveKey:["filters"],onChange:function(){return ui((function(i){return!i}))},children:(0,j.jsx)(w,{header:ei("filters"),extra:E&&Yi?(0,j.jsx)(s.Z,{icon:(0,j.jsx)(Z.Z,{name:"IoAdd"}),onClick:Ji,type:"primary",size:"small",title:null!==(n=ei("add"))&&void 0!==n?n:"",children:(0,j.jsx)("small",{children:ei("add")})}):null,children:(0,j.jsx)(d.Z,{name:"filters",form:li,initialValues:O,onFinish:function(i){wi((function(i){return(0,o.Z)((0,o.Z)({},i),{},{page:1})})),Fi.current=1,(M.length!==Ci.length||M.some((function(i){return!Ci.map((function(i){return i.key})).includes(i.key)})))&&ji(M),ie((0,o.Z)((0,o.Z)({},i),{},{page:1}))},autoComplete:"off",children:(0,j.jsxs)(u.Z,{direction:"horizontal",children:[N,(0,j.jsxs)(d.Z.Item,{className:"flex-row-end btns",children:[null===Y||void 0===Y?void 0:Y.map((function(i){return(0,j.jsx)(s.Z,{type:"primary",htmlType:"button",style:i.style,className:i.className,onClick:function(e){return i.onClick(e,li.getFieldsValue())},children:i.children})})),(0,j.jsx)(s.Z,{type:"primary",htmlType:"submit",children:ei("search")})]})]})})},"filters")}),(0,j.jsx)(v.Z,{loading:Pi,direction:"rtl",rowKey:P,columns:ne,dataSource:null===zi?void 0:(0,t.Z)(zi.results),onChange:function(i,e,n){var l,t,r,a;wi({page:null!==(l=i.current)&&void 0!==l?l:1,pageSize:null!==(t=i.pageSize)&&void 0!==t?t:15}),Fi.current=null!==(r=i.current)&&void 0!==r?r:1,ie((0,o.Z)((0,o.Z)({},li.getFieldsValue()),{},{page:null!==(a=i.current)&&void 0!==a?a:1}))},scroll:{x:H,y:X?X+(ci?0:null!==Q&&void 0!==Q?Q:0):X},pagination:T?void 0:{pageSize:ki.pageSize,current:ki.page,total:null===zi||void 0===zi?void 0:zi.totalEntitiesCount}},"table-".concat(P)),!!A&&(_?ri?(0,j.jsx)(S,{EntryForm:A,onCancel:ee,onEntrySubmit:function(i){L&&Zi?Ti.put(L.url,i):E&&!Zi&&Li.post(E,i)},entryModalWidth:G,title:ei(Zi?"edit":"add"),initialValues:null!==(F=null!==Zi&&void 0!==Zi?Zi:O)&&void 0!==F?F:void 0,loading:Wi||Ai}):null:ri?(0,j.jsx)(f.Z,{destroyOnClose:!0,open:!0,onCancel:ee,title:ei(Zi?"edit":"add"),footer:null,width:G,children:(0,j.jsx)(A,{onCancel:function(){return ai(!1)},data:Zi,onSuccess:Zi?qi:Hi})}):null),(0,j.jsx)(I.Z,{open:!!pi,loading:Ki,onOk:function(){if(pi&&R){var i,e;if("string"!==typeof(null===R||void 0===R?void 0:R.url)&&~(null===R||void 0===R?void 0:R.url(pi).indexOf("?")))throw new Error("delete url cannot have query strings");var n="string"===typeof(null===R||void 0===R?void 0:R.url)?"".concat(R.url):null===R||void 0===R?void 0:R.url(pi);_i.delete(n,(0,l.Z)({},null!==(i=null===R||void 0===R?void 0:R.sendingProp)&&void 0!==i?i:P,pi[null!==(e=null===R||void 0===R?void 0:R.sendingProp)&&void 0!==e?e:P]))}},onCancel:function(){return xi(null)}})]})})}},502:function(i,e,n){var l=n(3655),t=n(4021),o=n(2020),r=n(184),a=l.Z.Paragraph;e.Z=function(i){var e=i.open,n=i.onOk,l=i.loading,d=i.onCancel,s=i.title,c=i.message,u=(0,o.$)().t;return(0,r.jsx)(t.Z,{title:null!==s&&void 0!==s?s:u("delete"),open:e,onOk:n,onCancel:d,okButtonProps:{danger:!0,loading:l},children:(0,r.jsx)(a,{children:c||u("areYouSure")})})}},6129:function(i,e,n){var l=n(8467),t=n(184);e.Z=function(i){var e=i.value,n=i.enabelCopy,o=void 0===n||n;return(0,t.jsx)("span",{onClick:o?function(){return l.Z.copyToClipboard(e)}:void 0,title:e,children:l.Z.commaThousondSeperator("string"===typeof e?parseFloat(e):e)})}},3447:function(i,e){e.Z={nationalCode:/\d{10}/,personelId:/\d{4}/,email:/\S+@\S+\.\S+/,mobile:/09[0-9]{2}(-| )?[0-9]{3}(-| )?[0-9]{4}/,phone:/0\d{10}/,ip:/(?:[0-9]{1,3}\.){3}[0-9]{1,3}/,postalCode:/\d{10}/,url:/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)/}}}]);
//# sourceMappingURL=5.d33834fe.chunk.js.map