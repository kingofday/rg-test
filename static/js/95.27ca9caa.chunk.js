"use strict";(self.webpackChunkregional_water=self.webpackChunkregional_water||[]).push([[95],{1095:function(n,e,i){i.r(e),i.d(e,{default:function(){return h}});var t=i(6106),l=i(914),r=i(8993),o=i(177),a=i(5485),u=i(9530),d=i(2020),s=i(1413),c=i(9439),f=i(458),v=i(543),Z=i(184),m=function(n){n.data,n.form;var e,i,a,m=(0,d.$)().t,h=(0,v.Z)({autoCallUrl:u.Z.organizationLevel.tree,cachingLifeTimeInSeconds:60,mapper:function(n){var e=[];return n&&function n(i){e.push(i),i.nodes&&i.nodes.length&&i.nodes.forEach((function(e){return n((0,s.Z)((0,s.Z)({},e),{},{name:"".concat(i.name,"/").concat(e.name)}))}))}(n),e}}),p=(0,c.Z)(h,3),g=p[1],x=p[2];return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(r.Z.Item,{noStyle:!0,name:"id",children:(0,Z.jsx)(o.Z,{type:"hidden"})}),(0,Z.jsxs)(t.Z,{gutter:16,children:[(0,Z.jsx)(l.Z,{xs:24,sm:24,md:24,children:(0,Z.jsx)(r.Z.Item,{name:"name",label:m("name"),rules:[{required:!0,message:null!==(e=m("required"))&&void 0!==e?e:""}],children:(0,Z.jsx)(o.Z,{placeholder:null!==(i=m("name"))&&void 0!==i?i:""})})}),(0,Z.jsx)(l.Z,{xs:24,sm:24,md:24,children:(0,Z.jsx)(r.Z.Item,{name:"parentId",label:m("parent"),rules:[{required:!0,message:null!==(a=m("required"))&&void 0!==a?a:""}],children:(0,Z.jsx)(f.Z,{allowClear:!0,placeholder:m("parent"),options:null===x||void 0===x?void 0:x.map((function(n){return{label:n.name,value:n.id}})),loading:g})})})]})]})},h=function(){var n,e=(0,d.$)().t;return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(a.Z,{title:e("organizationLevel"),id:"organizationLevel",idProp:"id",EntryForm:m,filterUrl:u.Z.organizationLevel.list,findUrl:function(n){return u.Z.organizationLevel.find(n.id)},columns:[{title:e("name"),dataIndex:"name",key:"name"}],scrollX:300,deleteAction:{url:function(n){return u.Z.organizationLevel.delete(n.id)}},addUrl:u.Z.organizationLevel.add,editAction:{url:u.Z.organizationLevel.update},children:(0,Z.jsx)(t.Z,{gutter:[20,20],children:(0,Z.jsx)(l.Z,{xs:24,sm:12,children:(0,Z.jsx)(r.Z.Item,{name:"search",rules:[],children:(0,Z.jsx)(o.Z,{style:{width:250},placeholder:null!==(n=e("search"))&&void 0!==n?n:""})})})})})})}},5485:function(n,e,i){i.d(e,{Z:function(){return M}});var t=i(4942),l=i(3433),r=i(1413),o=i(9439),a=i(4916),u=i(8993),d=i(7309),s=i(294),c=i(3099),f=i(4525),v=i(4021),Z=i(4661),m=i(5486),h=i(8467),p=i(2791),g=(0,p.createContext)({}),x=i(543),j=i(2020),y=i(502),b=i(5761),C=i(184),k=function(n){var e,i=(0,j.$)().t,t=(0,x.Z)({onSuccess:function(e){n.afterSelect(e)}}),l=(0,o.Z)(t,2),r=l[0],a=l[1];return(0,C.jsx)(d.Z,{loading:a,type:n.isMobile?"ghost":"primary",shape:n.isMobile?"default":"circle",icon:n.isMobile?void 0:(0,C.jsx)(Z.Z,{size:n.isMobile?20:10,name:"IoPencilOutline"}),onClick:function(){if(n.findUrl){var e="string"===typeof n.findUrl?"".concat(n.findUrl,"?").concat(n.idProp,"=").concat(n.record[n.idProp]):n.findUrl(n.record);r.get(e)}else n.afterSelect(n.record)},title:null!==(e=i("edit"))&&void 0!==e?e:"",children:n.isMobile?i("edit"):null})},S=function(n){var e=u.Z.useForm(),i=(0,o.Z)(e,1)[0];return(0,C.jsx)(v.Z,{destroyOnClose:!0,open:!0,onCancel:n.onCancel,title:n.title,onOk:function(){i.submit()},okButtonProps:{loading:n.loading},width:n.entryModalWidth,children:(0,C.jsx)(u.Z,{id:"entry-form",layout:"vertical",form:i,initialValues:n.data||n.initialValues,onFinish:n.onEntrySubmit,autoComplete:"off",children:(0,C.jsx)(n.EntryForm,{form:i,initialValues:n.initialValues,data:n.data})})})},w=function(n){var e,i=(0,j.$)().t;return(0,C.jsx)(d.Z,{danger:!0,type:n.isMobile?"ghost":"primary",shape:n.isMobile?"default":"circle",icon:n.isMobile?void 0:(0,C.jsx)(Z.Z,{size:n.isMobile?20:10,name:"IoTrashOutline"}),onClick:n.onClick,title:null!==(e=i("delete"))&&void 0!==e?e:"",children:n.isMobile?i("delete"):null})},z=a.Z.Panel,M=function(n){var e,i,M=n.id,P=n.title,E=n.columns,F=n.idProp,I=n.filterUrl,U=n.findUrl,V=n.addUrl,L=n.initialValues,O=n.disablePaging,N=n.EntryForm,A=n.children,W=n.deleteAction,$=n.editAction,q=n.pageSize,B=void 0===q?15:q,T=n.handleSubmit,D=void 0===T||T,K=n.customActions,R=n.buttons,X=n.scrollX,Y=void 0===X?"1500px":X,_=n.filtersHeight,H=n.scrollY,Q=n.entryModalWidth,G=n.enableRowNumber,J=void 0===G||G,nn=(0,j.$)().t,en=u.Z.useForm(),tn=(0,o.Z)(en,1)[0],ln=(0,p.useState)(!1),rn=(0,o.Z)(ln,2),on=rn[0],an=rn[1],un=(0,p.useState)(!0),dn=(0,o.Z)(un,2),sn=dn[0],cn=dn[1],fn=(0,p.useState)(null),vn=(0,o.Z)(fn,2),Zn=vn[0],mn=vn[1],hn=(0,p.useState)(null),pn=(0,o.Z)(hn,2),gn=pn[0],xn=pn[1],jn=(0,p.useState)(E),yn=(0,o.Z)(jn,2),bn=yn[0],Cn=yn[1],kn=(0,p.useState)({page:1,pageSize:B}),Sn=(0,o.Z)(kn,2),wn=Sn[0],zn=Sn[1],Mn=(0,p.useRef)(1),Pn=(0,x.Z)({initLoading:!0}),En=(0,o.Z)(Pn,4),Fn=En[0],In=En[1],Un=En[2],Vn=En[3],Ln=(0,x.Z)({onSuccess:function(n,e){Yn(e)}}),On=(0,o.Z)(Ln,2),Nn=On[0],An=On[1],Wn=(0,x.Z)({onSuccess:function(n,e){_n(e?(0,r.Z)((0,r.Z)({},e),n):n)}}),$n=(0,o.Z)(Wn,2),qn=$n[0],Bn=$n[1],Tn=(0,x.Z)({onSuccess:function(n,e){var i=F,t=null===e||void 0===e?void 0:e[i];t&&Vn((function(n){var e;return(0,r.Z)((0,r.Z)({},n),{},{totalEntitiesCount:null!==(e=null===n||void 0===n?void 0:n.totalEntitiesCount)&&void 0!==e?e:0,results:null===n||void 0===n?void 0:n.results.filter((function(n){return n[i]!==t}))})})),xn(null)}}),Dn=(0,o.Z)(Tn,2),Kn=Dn[0],Rn=Dn[1],Xn=(0,p.useMemo)((function(){return window.outerWidth<m.Z.breakpoints.xl}),[]),Yn=function(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=F,t=null===n||void 0===n?void 0:n[i];t&&Vn((function(e){return(0,r.Z)((0,r.Z)({},e),{},{results:null===e||void 0===e?void 0:e.results.map((function(e){return e[i]===t?(0,r.Z)((0,r.Z)({},e),n):e}))})})),e&&an(!1)},_n=function(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=F,t=null===n||void 0===n?void 0:n[i];t&&Vn((function(e){var i,t;return(0,r.Z)((0,r.Z)({},e),{},{totalEntitiesCount:null!==(i=null===e||void 0===e?void 0:e.totalEntitiesCount)&&void 0!==i?i:1,results:[n].concat((0,l.Z)(null!==(t=null===e||void 0===e?void 0:e.results)&&void 0!==t?t:[]))})})),e&&an(!1)},Hn=function(n){mn(n),an(!0)},Qn=function(n){xn(n)},Gn=(0,p.useMemo)((function(){var n;if((!K||!K.length)&&!$&&!W)return null;var e=(null!==(n=null===K||void 0===K?void 0:K.length)&&void 0!==n?n:0)+($?1:0)+(W?1:0);return{title:(0,C.jsx)(Z.Z,{name:"IoBuildOutline"}),align:"center",key:"actions",fixed:"right",width:Xn?30:25*e+8*(e-1)+40,dataIndex:"actions",render:function(n,e,i){if(Xn){var t=[];return $&&t.push({key:"edit",label:(0,C.jsx)(k,{findUrl:U,afterSelect:Hn,idProp:F,record:e,isMobile:!0})}),W&&t.push({key:"delete",label:(0,C.jsx)(w,{isMobile:!0,onClick:function(){return Qn(e)}})}),null!==K&&void 0!==K&&K.length&&(t=t.concat(K.map((function(i,t){var l;return{key:"action-"+t,label:i.renderer?i.renderer(n,e,Vn,Xn):(0,C.jsx)(d.Z,{type:Xn?"ghost":"primary",shape:Xn?"default":"circle",icon:(0,C.jsx)(Z.Z,{size:Xn?20:10,name:null!==(l=i.icon)&&void 0!==l?l:"BsDash"}),onClick:function(){var n;return null===(n=i.action)||void 0===n?void 0:n.call(i,e,Vn)}},t)}})))),(0,C.jsx)(s.Z,{menu:{items:t},children:(0,C.jsx)("a",{onClick:function(n){return n.preventDefault()},children:(0,C.jsx)(Z.Z,{name:"FaEllipsisV"})})})}return(0,C.jsxs)(c.Z,{className:"actions",children:[!!$&&(0,C.jsx)(k,{findUrl:U,afterSelect:Hn,idProp:F,record:e}),!!W&&(0,C.jsx)(w,{onClick:function(){return Qn(e)}}),!!K&&K.map((function(i,t){var l;return i.renderer?i.renderer(n,e,Vn):(0,C.jsx)(d.Z,{type:"primary",shape:"circle",icon:(0,C.jsx)(Z.Z,{size:10,name:null!==(l=i.icon)&&void 0!==l?l:"BsDash"}),onClick:function(){var n;return null===(n=i.action)||void 0===n?void 0:n.call(i,e,Vn)}},t)}))]})}}}),[K]),Jn=function(n){n.stopPropagation(),mn(null),an(!0)},ne=function(n){Fn.get("".concat(I,"?").concat(h.Z.convertToQueryString((0,r.Z)((0,r.Z)({},wn),n)).toString()))},ee=function(){mn(null),an(!1)};(0,p.useEffect)((function(){ne(tn.getFieldsValue())}),[]);var ie=(0,p.useMemo)((function(){var n=Gn?[].concat((0,l.Z)(bn.filter((function(n){return"rowNumber"!==n.key})).map((function(n){return(0,r.Z)((0,r.Z)({},n),{},{fixed:window.outerWidth<m.Z.breakpoints.lg?void 0:n.fixed})}))),[Gn]):bn.filter((function(n){return"rowNumber"!==n.key}));return J&&n.unshift({key:"rowNumber",title:"#",width:80,fixed:window.outerWidth<m.Z.breakpoints.lg?void 0:"left",render:function(n,e,i){return(0,C.jsx)("span",{children:(Mn.current-1)*wn.pageSize+i+1})}}),n}),[bn]);return(0,C.jsx)(g.Provider,{value:{form:tn},children:(0,C.jsxs)(b.Z,{id:M,title:P,className:"admin",children:[!Xn&&!!V&&(0,C.jsx)("div",{children:(0,C.jsx)(d.Z,{icon:(0,C.jsx)(Z.Z,{name:"IoAdd"}),onClick:Jn,type:"primary",size:"small",title:null!==(e=nn("add"))&&void 0!==e?e:"",children:(0,C.jsx)("small",{children:nn("add")})})}),(0,C.jsx)(a.Z,{defaultActiveKey:["filters"],onChange:function(){return cn((function(n){return!n}))},children:(0,C.jsx)(z,{header:nn("filters"),extra:V&&Xn?(0,C.jsx)(d.Z,{icon:(0,C.jsx)(Z.Z,{name:"IoAdd"}),onClick:Jn,type:"primary",size:"small",title:null!==(i=nn("add"))&&void 0!==i?i:"",children:(0,C.jsx)("small",{children:nn("add")})}):null,children:(0,C.jsx)(u.Z,{name:"filters",form:tn,initialValues:L,onFinish:function(n){zn((function(n){return(0,r.Z)((0,r.Z)({},n),{},{page:1})})),Mn.current=1,(E.length!==bn.length||E.some((function(n){return!bn.map((function(n){return n.key})).includes(n.key)})))&&Cn(E),ne((0,r.Z)((0,r.Z)({},n),{},{page:1}))},autoComplete:"off",children:(0,C.jsxs)(c.Z,{direction:"horizontal",children:[A,(0,C.jsxs)(u.Z.Item,{className:"flex-row-end btns",children:[null===R||void 0===R?void 0:R.map((function(n){return(0,C.jsx)(d.Z,{type:"primary",htmlType:"button",style:n.style,className:n.className,onClick:function(e){return n.onClick(e,tn.getFieldsValue())},children:n.children})})),(0,C.jsx)(d.Z,{type:"primary",htmlType:"submit",children:nn("search")})]})]})})},"filters")}),(0,C.jsx)(f.Z,{loading:In,direction:"rtl",rowKey:F,columns:ie,dataSource:null===Un?void 0:(0,l.Z)(Un.results),onChange:function(n,e,i){var t,l,o,a;zn({page:null!==(t=n.current)&&void 0!==t?t:1,pageSize:null!==(l=n.pageSize)&&void 0!==l?l:15}),Mn.current=null!==(o=n.current)&&void 0!==o?o:1,ne((0,r.Z)((0,r.Z)({},tn.getFieldsValue()),{},{page:null!==(a=n.current)&&void 0!==a?a:1}))},scroll:{x:Y,y:H?H+(sn?0:null!==_&&void 0!==_?_:0):H},pagination:O?void 0:{pageSize:wn.pageSize,current:wn.page,total:null===Un||void 0===Un?void 0:Un.totalEntitiesCount}},"table-".concat(F)),!!N&&(D?on?(0,C.jsx)(S,{EntryForm:N,onCancel:ee,onEntrySubmit:function(n){$&&Zn?Nn.put($.url,n):V&&!Zn&&qn.post(V,n)},entryModalWidth:Q,title:nn(Zn?"edit":"add"),data:null!==Zn&&void 0!==Zn?Zn:void 0,initialValues:null!==L&&void 0!==L?L:void 0,loading:Bn||An}):null:on?(0,C.jsx)(v.Z,{destroyOnClose:!0,open:!0,onCancel:ee,title:nn(Zn?"edit":"add"),footer:null,width:Q,children:(0,C.jsx)(N,{onCancel:function(){return an(!1)},data:Zn,onSuccess:Zn?Yn:_n})}):null),(0,C.jsx)(y.Z,{open:!!gn,loading:Rn,onOk:function(){if(gn&&W){var n,e;if("string"!==typeof(null===W||void 0===W?void 0:W.url)&&~(null===W||void 0===W?void 0:W.url(gn).indexOf("?")))throw new Error("delete url cannot have query strings");var i="string"===typeof(null===W||void 0===W?void 0:W.url)?"".concat(W.url):null===W||void 0===W?void 0:W.url(gn);Kn.delete(i,(0,t.Z)({},null!==(n=null===W||void 0===W?void 0:W.sendingProp)&&void 0!==n?n:F,gn[null!==(e=null===W||void 0===W?void 0:W.sendingProp)&&void 0!==e?e:F]))}},onCancel:function(){return xn(null)}})]})})}},502:function(n,e,i){var t=i(3655),l=i(4021),r=i(2020),o=i(184),a=t.Z.Paragraph;e.Z=function(n){var e=n.open,i=n.onOk,t=n.loading,u=n.onCancel,d=n.title,s=n.message,c=(0,r.$)().t;return(0,o.jsx)(l.Z,{title:null!==d&&void 0!==d?d:c("delete"),open:e,onOk:i,onCancel:u,okButtonProps:{danger:!0,loading:t},children:(0,o.jsx)(a,{children:s||c("areYouSure")})})}}}]);
//# sourceMappingURL=95.27ca9caa.chunk.js.map