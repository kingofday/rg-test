"use strict";(self.webpackChunkregional_water=self.webpackChunkregional_water||[]).push([[57],{7057:function(e,r,n){n.r(r),n.d(r,{default:function(){return S}});var l=n(3433),a=n(1413),s=n(9439),i=n(7309),o=n(6106),d=n(914),t=n(8993),u=n(177),m=n(5485),c=n(502),h=n(2166),x=n(9530),Z=n(543),v=n(2791),p=n(2020),f=n(6129),j=n(2014),g=n(458),w=n(7097),b=n(8467),I=n(184),y=function(e){var r,n=(0,p.$)().t,l=e.form||t.Z,a=(0,v.useMemo)((function(){var r,l=[];return e.notRequired||l.push({required:!0,message:null!==(r=n("required"))&&void 0!==r?r:""}),"undefined"!==typeof e.min&&l.push({validator:function(r,l,a){return l&&parseFloat(l)<e.min?Promise.reject(new Error(null!==(s=n("minAmountIsX",{amount:b.Z.commaThousondSeperator(e.min)}))&&void 0!==s?s:"")):Promise.resolve();var s}}),"undefined"!==typeof e.max&&l.push({validator:function(r,l,a){return l&&parseFloat(l)>e.max?Promise.reject(new Error(null!==(s=n("maxAmountIsX",{amount:b.Z.commaThousondSeperator(e.max)}))&&void 0!==s?s:"")):Promise.resolve();var s}}),l}),[e.notRequired,e.min,e.max]);return(0,I.jsx)(l.Item,{name:e.name||"amount",label:e.label||n("amount"),rules:a,children:(0,I.jsx)(w.Z,{readOnly:e.readOnly,stringMode:e.stringMode,formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return parseFloat(e.replace(/\$\s?|(,*)/g,""))},placeholder:e.placeholder,className:"ltr-elm placeholder-r w-100 ".concat(e.className),controls:!1,style:{paddingRight:11},prefix:null!==(r=n("baseCurrency"))&&void 0!==r?r:e.unit})})},P=n(3447),q=n(2580),C=function(e){var r,n,l,i,m,c,h,v,f,w,b,C,N,k,S,M,F,E,A,L,O,z,T,U,$=e.data,R=e.form,V=(0,p.$)().t,X=(0,Z.Z)({autoCallUrl:x.Z.userManager.roles,cachingLifeTimeInSeconds:60}),B=(0,s.Z)(X,3),Y=B[1],_=B[2],D=(0,Z.Z)({autoCallUrl:x.Z.organizationLevel.tree,cachingLifeTimeInSeconds:60,mapper:function(e){var r=[];return e&&function e(n){n.nodes&&n.nodes.length?n.nodes.forEach((function(r){return e((0,a.Z)((0,a.Z)({},r),{},{name:"".concat(n.name,"/").concat(r.name)}))})):r.push(n)}(e),r}}),W=(0,s.Z)(D,3),G=W[1],H=W[2];return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(t.Z.Item,{noStyle:!0,name:"id",children:(0,I.jsx)(u.Z,{type:"hidden"})}),(0,I.jsxs)(o.Z,{gutter:16,children:[(0,I.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,I.jsx)(t.Z.Item,{name:"firstName",label:V("firstName"),rules:[{required:!0,message:null!==(r=V("required"))&&void 0!==r?r:""}],children:(0,I.jsx)(u.Z,{placeholder:null!==(n=V("firstName"))&&void 0!==n?n:""})})}),(0,I.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,I.jsx)(t.Z.Item,{name:"lastName",label:V("lastName"),rules:[{required:!0,message:null!==(l=V("required"))&&void 0!==l?l:""}],children:(0,I.jsx)(u.Z,{placeholder:null!==(i=V("lastName"))&&void 0!==i?i:""})})}),(0,I.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,I.jsx)(t.Z.Item,{name:"nationalCode",label:V("nationalCode"),rules:[{required:!0,message:null!==(m=V("required"))&&void 0!==m?m:""},{pattern:P.Z.nationalCode,message:null!==(c=V("wrongFormat"))&&void 0!==c?c:""}],children:(0,I.jsx)(u.Z,{readOnly:!!$,placeholder:null!==(h=V("nationalCode"))&&void 0!==h?h:"",className:"ltr-elm placeholder-r"})})}),(0,I.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,I.jsx)(t.Z.Item,{valuePropName:"checked",name:"isEnabled",label:" ",children:(0,I.jsx)(j.Z,{children:V("isEnabled")})})}),!$&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,I.jsx)(t.Z.Item,{name:"password",label:V("password"),rules:[{required:!0,message:null!==(v=V("required"))&&void 0!==v?v:""},{min:8,message:null!==(f=V("atleastXChar",{x:8}))&&void 0!==f?f:""}],children:(0,I.jsx)(u.Z.Password,{placeholder:null!==(w=V("password"))&&void 0!==w?w:"",className:"ltr-elm placeholder-r"})})}),(0,I.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,I.jsx)(t.Z.Item,{name:"passwordConfirm",label:V("confirmPassword"),rules:[{required:!0,message:null!==(b=V("required"))&&void 0!==b?b:""},function(e){var r=e.getFieldValue;return{validator:function(e,n){var l;return r("password")===n?Promise.resolve():Promise.reject(new Error(null!==(l=V("passwordsMissMatch"))&&void 0!==l?l:""))}}}],children:(0,I.jsx)(u.Z.Password,{placeholder:null!==(C=V("confirmPassword"))&&void 0!==C?C:"",className:"ltr-elm  placeholder-r"})})})]}),(0,I.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,I.jsx)(t.Z.Item,{name:"personnelId",label:V("personnelId"),rules:[{required:!0,message:null!==(N=V("required"))&&void 0!==N?N:""},{pattern:P.Z.personelId,message:null!==(k=V("wrongFormat"))&&void 0!==k?k:""}],children:(0,I.jsx)(u.Z,{placeholder:null!==(S=V("personnelId"))&&void 0!==S?S:"",className:"ltr-elm placeholder-r"})})}),(0,I.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,I.jsx)(t.Z.Item,{name:"phoneNumber",label:V("mobileNumber"),rules:[{required:!0,message:null!==(M=V("required"))&&void 0!==M?M:""},{pattern:P.Z.mobile,message:null!==(F=V("wrongFormat"))&&void 0!==F?F:""}],children:(0,I.jsx)(u.Z,{placeholder:null!==(E=V("mobileNumber"))&&void 0!==E?E:"",className:"ltr-elm placeholder-r"})})}),(0,I.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,I.jsx)(y,{stringMode:!1,name:"baseSalary",label:null!==(A=V("baseSalary"))&&void 0!==A?A:"",placeholder:null!==(L=V("baseSalary"))&&void 0!==L?L:""})}),(0,I.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,I.jsx)(t.Z.Item,{name:"emailAddress",label:V("email"),rules:[{pattern:P.Z.email,message:null!==(O=V("wrongFormat"))&&void 0!==O?O:""}],children:(0,I.jsx)(u.Z,{placeholder:null!==(z=V("email"))&&void 0!==z?z:"",className:"ltr-elm placeholder-r"})})}),(0,I.jsx)(d.Z,{xs:24,sm:8,md:6,children:(0,I.jsx)(t.Z.Item,{name:"organizationLevelId",label:V("organizationLevel"),rules:[{required:!0,message:null!==(T=V("required"))&&void 0!==T?T:""}],children:(0,I.jsx)(g.Z,{allowClear:!0,placeholder:V("organizationLevel"),options:null===H||void 0===H?void 0:H.map((function(e){return{label:e.name,value:e.id}})),loading:G})})}),(0,I.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,I.jsx)(t.Z.Item,{name:"roleIds",label:V("roles"),rules:[{required:!0,message:null!==(U=V("required"))&&void 0!==U?U:""}],children:(0,I.jsx)(g.Z,{mode:"multiple",loading:Y,placeholder:V("roles"),defaultValue:[],showArrow:!0,style:{width:"100%"},options:null===_||void 0===_?void 0:_.map((function(e){return{label:e.name,value:e.id}}))})})}),(0,I.jsx)(q.Z,{data:$,entryFrm:R})]})]})},N=n(4021),k=function(e){var r,n,l,a,i=(0,Z.Z)({onSuccess:function(){e.onClose()}}),m=(0,s.Z)(i,2),c=m[0],h=m[1],v=(0,p.$)().t,f=t.Z.useForm(),j=(0,s.Z)(f,1)[0];return(0,I.jsx)(N.Z,{title:v("resetPassword"),open:!0,onCancel:e.onClose,onOk:function(){j.submit()},okButtonProps:{loading:h},children:(0,I.jsxs)(t.Z,{layout:"vertical",onFinish:function(e){c.post(x.Z.userManager.resetPassword,e)},onFinishFailed:function(){},autoComplete:"off",form:j,initialValues:e.data,children:[(0,I.jsx)(t.Z.Item,{noStyle:!0,name:"id",children:(0,I.jsx)(u.Z,{type:"hidden"})}),(0,I.jsxs)(o.Z,{gutter:16,children:[(0,I.jsx)(d.Z,{xs:24,sm:24,children:(0,I.jsx)(t.Z.Item,{name:"newPassword",label:v("newPassword"),rules:[{required:!0,message:null!==(r=v("required"))&&void 0!==r?r:""}],children:(0,I.jsx)(u.Z.Password,{placeholder:null!==(n=v("newPassword"))&&void 0!==n?n:""})})}),(0,I.jsx)(d.Z,{xs:24,sm:24,children:(0,I.jsx)(t.Z.Item,{name:"passwordConfirm",label:v("repeatPassword"),rules:[{required:!0,message:null!==(l=v("required"))&&void 0!==l?l:""},function(e){var r=e.getFieldValue;return{validator:function(e,n){var l;return r("newPassword")===n?Promise.resolve():Promise.reject(new Error(null!==(l=v("passwordsMissMatch"))&&void 0!==l?l:""))}}}],children:(0,I.jsx)(u.Z.Password,{placeholder:null!==(a=v("repeatPassword"))&&void 0!==a?a:""})})})]})]},"reset-password-form")})},S=function(){var e,r,n,j=(0,p.$)().t,g=(0,v.useState)(null),w=(0,s.Z)(g,2),b=w[0],y=w[1],P=(0,v.useState)(null),q=(0,s.Z)(P,2),N=q[0],S=q[1],M=(0,Z.Z)({onSuccess:function(e,r){null===b||void 0===b||b.updater((function(e){var r;return(0,a.Z)((0,a.Z)({},e),{},{results:(0,l.Z)(null!==(r=null===e||void 0===e?void 0:e.results.map((function(e){return e.id!==b.user.id?e:(0,a.Z)((0,a.Z)({},e),{},{isEnabled:!b.user.isEnabled})})))&&void 0!==r?r:[])})})),y(null)}}),F=(0,s.Z)(M,2),E=F[0],A=F[1];return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(m.Z,{title:j("usersManagement"),id:"user",idProp:"id",EntryForm:C,filterUrl:x.Z.userManager.list,findUrl:function(e){return x.Z.userManager.find(e.id)},columns:[{title:j("fullName"),dataIndex:"fullName",key:"fullName",fixed:"left",render:function(e,r,n){return(0,I.jsx)("span",{children:"".concat(r.firstName," ").concat(r.lastName)})}},{title:j("nationalCode"),dataIndex:"nationalCode",key:"nationalCode"},{title:j("email"),dataIndex:"emailAddress",key:"emailAddress",width:220,render:function(e,r,n){return(0,I.jsx)("a",{href:"mailto:".concat(e),children:e})}},{title:j("baseSalary"),dataIndex:"baseSalary",key:"baseSalary",render:function(e){return(0,I.jsx)(f.Z,{value:e})}},{title:j("organizationLevel"),dataIndex:"organizationLevelName",key:"organizationLevelName",width:200,render:function(e){return(0,I.jsx)("span",{children:e})}},{title:j("enabled"),dataIndex:"enabled",key:"enabled",width:100,render:function(e,r,n){return r.isEnabled?j("yes"):j("no")}}],scrollX:1100,deleteAction:{url:function(e){return x.Z.userManager.delete(e.id)}},addUrl:x.Z.userManager.add,editAction:{url:x.Z.userManager.update},customActions:[{renderer:function(e,r,n,l){var a;return(0,I.jsx)(i.Z,{danger:l?void 0:r.isEnabled,type:l?"ghost":"primary",shape:l?"default":"circle",title:null!==(a=r.isEnabled?j("deactive"):j("activate"))&&void 0!==a?a:"",icon:l?void 0:(0,I.jsx)(h.Z,{name:r.isEnabled?"IoLockClosedOutline":"IoShieldCheckmarkOutline"}),onClick:function(){return y({user:r,updater:n})},children:l?r.isEnabled?j("deactive"):j("activate"):null})}},{renderer:function(e,r,n,l){var a;return(0,I.jsx)(i.Z,{type:l?"ghost":"primary",shape:l?"default":"circle",title:null!==(a=j("resetPasswrod"))&&void 0!==a?a:"",icon:l?void 0:(0,I.jsx)(h.Z,{name:"MdOutlineLockReset"}),onClick:function(){return S(r)},children:l?j("resetPassword"):null})}}],entryModalWidth:1e3,children:(0,I.jsx)(o.Z,{gutter:[20,20],children:(0,I.jsx)(d.Z,{xs:24,sm:12,children:(0,I.jsx)(t.Z.Item,{name:"search",rules:[],children:(0,I.jsx)(u.Z,{placeholder:null!==(e=j("search"))&&void 0!==e?e:""})})})})}),(0,I.jsx)(c.Z,{open:!!b,loading:A,onOk:function(){E.post(x.Z.userManager.changeStatus(b.user.id,!b.user.isEnabled))},title:null!==(r=j("userAccount"))&&void 0!==r?r:"",message:null!==(n=null!==b&&void 0!==b&&b.user.isEnabled?j("areYouSureToDeactive"):j("areYouSureToActivate"))&&void 0!==n?n:"",onCancel:function(){return y(null)}}),N&&(0,I.jsx)(k,{onClose:function(){return S(null)},data:N})]})}}}]);
//# sourceMappingURL=57.14d2c618.chunk.js.map