"use strict";(self.webpackChunkregional_water=self.webpackChunkregional_water||[]).push([[567],{3567:function(e,r,n){n.r(r),n.d(r,{default:function(){return P}});var t=n(3433),l=n(1413),i=n(9439),a=n(7309),o=n(8993),d=n(177),s=n(5485),u=n(502),c=n(4661),m=n(9530),h=n(543),f=n(2791),x=n(2020),p=n(6129),Z=n(6106),g=n(914),v=n(2014),b=n(458),w=n(7128),j=n(3447),y=n(2580),S=n(184),I=function(e){var r,n,t,a,s,u,c,f,p,I,C,k,P,z,E,N,M,q,L,F=e.data,O=e.form,A=(0,x.$)().t,T=(0,h.Z)({autoCallUrl:m.Z.userManager.roles,cachingLifeTimeInSeconds:60}),W=(0,i.Z)(T,3),B=W[1],G=W[2],H=(0,h.Z)({autoCallUrl:m.Z.organizationLevel.tree,cachingLifeTimeInSeconds:60,mapper:function(e){var r=[];return e&&function e(n){n.nodes&&n.nodes.length?n.nodes.forEach((function(r){return e((0,l.Z)((0,l.Z)({},r),{},{name:"".concat(n.name,"/").concat(r.name)}))})):r.push(n)}(e),r}}),V=(0,i.Z)(H,3),U=V[1],X=V[2];return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(o.Z.Item,{noStyle:!0,name:"id",children:(0,S.jsx)(d.Z,{type:"hidden"})}),(0,S.jsxs)(Z.Z,{gutter:16,children:[(0,S.jsx)(g.Z,{xs:12,sm:8,md:6,children:(0,S.jsx)(o.Z.Item,{name:"firstName",label:A("firstName"),rules:[{required:!0,message:null!==(r=A("required"))&&void 0!==r?r:""}],children:(0,S.jsx)(d.Z,{placeholder:null!==(n=A("firstName"))&&void 0!==n?n:""})})}),(0,S.jsx)(g.Z,{xs:12,sm:8,md:6,children:(0,S.jsx)(o.Z.Item,{name:"lastName",label:A("lastName"),rules:[{required:!0,message:null!==(t=A("required"))&&void 0!==t?t:""}],children:(0,S.jsx)(d.Z,{placeholder:null!==(a=A("lastName"))&&void 0!==a?a:""})})}),(0,S.jsx)(g.Z,{xs:12,sm:8,md:6,children:(0,S.jsx)(o.Z.Item,{name:"nationalCode",label:A("nationalCode"),rules:[{required:!0,message:null!==(s=A("required"))&&void 0!==s?s:""},{pattern:j.Z.nationalCode,message:null!==(u=A("wrongFormat"))&&void 0!==u?u:""}],children:(0,S.jsx)(d.Z,{readOnly:!!F,placeholder:null!==(c=A("nationalCode"))&&void 0!==c?c:"",className:"ltr-elm placeholder-r"})})}),(0,S.jsx)(g.Z,{xs:12,sm:8,md:6,children:(0,S.jsx)(o.Z.Item,{valuePropName:"checked",name:"isEnabled",label:" ",children:(0,S.jsx)(v.Z,{defaultChecked:!0,children:A("isEnabled")})})}),!F&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(g.Z,{xs:12,sm:8,md:6,children:(0,S.jsx)(o.Z.Item,{name:"password",label:A("password"),rules:[{required:!0,message:null!==(f=A("required"))&&void 0!==f?f:""},{min:8,message:null!==(p=A("atleastXChar",{x:8}))&&void 0!==p?p:""}],children:(0,S.jsx)(d.Z.Password,{placeholder:null!==(I=A("password"))&&void 0!==I?I:"",className:"ltr-elm placeholder-r"})})}),(0,S.jsx)(g.Z,{xs:12,sm:8,md:6,children:(0,S.jsx)(o.Z.Item,{name:"passwordConfirm",label:A("confirmPassword"),rules:[{required:!0,message:null!==(C=A("required"))&&void 0!==C?C:""},function(e){var r=e.getFieldValue;return{validator:function(e,n){var t;return r("password")===n?Promise.resolve():Promise.reject(new Error(null!==(t=A("passwordsMissMatch"))&&void 0!==t?t:""))}}}],children:(0,S.jsx)(d.Z.Password,{placeholder:null!==(k=A("confirmPassword"))&&void 0!==k?k:"",className:"ltr-elm  placeholder-r"})})})]}),(0,S.jsx)(g.Z,{xs:12,sm:8,md:6,children:(0,S.jsx)(o.Z.Item,{name:"phoneNumber",label:A("mobileNumber"),rules:[{required:!0,message:null!==(P=A("required"))&&void 0!==P?P:""},{pattern:j.Z.mobile,message:null!==(z=A("wrongFormat"))&&void 0!==z?z:""}],children:(0,S.jsx)(d.Z,{placeholder:null!==(E=A("mobileNumber"))&&void 0!==E?E:"",className:"ltr-elm placeholder-r"})})}),(0,S.jsx)(g.Z,{xs:12,sm:8,md:6,children:(0,S.jsx)(o.Z.Item,{name:"emailAddress",label:A("email"),rules:[{pattern:j.Z.email,message:null!==(N=A("wrongFormat"))&&void 0!==N?N:""}],children:(0,S.jsx)(d.Z,{placeholder:null!==(M=A("email"))&&void 0!==M?M:"",className:"ltr-elm placeholder-r"})})}),(0,S.jsx)(g.Z,{xs:24,sm:12,md:12,children:(0,S.jsx)(o.Z.Item,{name:"organizationLevelId",label:A("organizationLevel"),rules:[{required:!0,message:null!==(q=A("required"))&&void 0!==q?q:""}],children:(0,S.jsx)(b.Z,{allowClear:!0,placeholder:A("organizationLevel"),options:null===X||void 0===X?void 0:X.map((function(e){return{label:e.name,value:e.id}})),loading:U})})}),(0,S.jsx)(g.Z,{xs:12,sm:12,md:12,children:(0,S.jsx)(o.Z.Item,{name:"roleIds",label:A("roles"),rules:[{required:!0,message:null!==(L=A("required"))&&void 0!==L?L:""}],children:(0,S.jsx)(b.Z,{mode:"multiple",loading:B,placeholder:A("roles"),defaultValue:[],showArrow:!0,style:{width:"100%"},options:null===G||void 0===G?void 0:G.map((function(e){return{label:e.name,value:e.id}}))})})}),(0,S.jsx)(g.Z,{xs:24,sm:24,md:24,children:(0,S.jsx)(w.Z,{orientation:"left",children:A("geographicaLocation")})}),(0,S.jsx)(y.Z,{hideIfCityIdSelected:!0,data:F,entryFrm:O})]})]})},C=n(4021),k=function(e){var r,n,t,l,a=(0,h.Z)({onSuccess:function(){e.onClose()}}),s=(0,i.Z)(a,2),u=s[0],c=s[1],f=(0,x.$)().t,p=o.Z.useForm(),v=(0,i.Z)(p,1)[0];return(0,S.jsx)(C.Z,{title:f("resetPassword"),open:!0,onCancel:e.onClose,onOk:function(){v.submit()},okButtonProps:{loading:c},children:(0,S.jsxs)(o.Z,{layout:"vertical",onFinish:function(e){u.post(m.Z.userManager.resetPassword,e)},onFinishFailed:function(){},autoComplete:"off",form:v,initialValues:e.data,children:[(0,S.jsx)(o.Z.Item,{noStyle:!0,name:"id",children:(0,S.jsx)(d.Z,{type:"hidden"})}),(0,S.jsxs)(Z.Z,{gutter:16,children:[(0,S.jsx)(g.Z,{xs:24,sm:24,children:(0,S.jsx)(o.Z.Item,{name:"newPassword",label:f("newPassword"),rules:[{required:!0,message:null!==(r=f("required"))&&void 0!==r?r:""}],children:(0,S.jsx)(d.Z.Password,{placeholder:null!==(n=f("newPassword"))&&void 0!==n?n:""})})}),(0,S.jsx)(g.Z,{xs:24,sm:24,children:(0,S.jsx)(o.Z.Item,{name:"passwordConfirm",label:f("repeatPassword"),rules:[{required:!0,message:null!==(t=f("required"))&&void 0!==t?t:""},function(e){var r=e.getFieldValue;return{validator:function(e,n){var t;return r("newPassword")===n?Promise.resolve():Promise.reject(new Error(null!==(t=f("passwordsMissMatch"))&&void 0!==t?t:""))}}}],children:(0,S.jsx)(d.Z.Password,{placeholder:null!==(l=f("repeatPassword"))&&void 0!==l?l:""})})})]})]},"reset-password-form")})},P=function(){var e,r,n,Z=(0,x.$)().t,g=(0,f.useState)(null),v=(0,i.Z)(g,2),b=v[0],w=v[1],j=(0,f.useState)(null),y=(0,i.Z)(j,2),C=y[0],P=y[1],z=(0,h.Z)({onSuccess:function(e,r){null===b||void 0===b||b.updater((function(e){var r;return(0,l.Z)((0,l.Z)({},e),{},{results:(0,t.Z)(null!==(r=null===e||void 0===e?void 0:e.results.map((function(e){return e.id!==b.user.id?e:(0,l.Z)((0,l.Z)({},e),{},{isEnabled:!b.user.isEnabled})})))&&void 0!==r?r:[])})})),w(null)}}),E=(0,i.Z)(z,2),N=E[0],M=E[1];return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(s.Z,{title:Z("usersManagement"),id:"user",idProp:"id",EntryForm:I,filterUrl:m.Z.userManager.list,findUrl:function(e){return m.Z.userManager.find(e.id)},columns:[{title:Z("fullName"),dataIndex:"fullName",key:"fullName",fixed:"left",render:function(e,r,n){return(0,S.jsx)("span",{children:"".concat(r.firstName," ").concat(r.lastName)})}},{title:Z("nationalCode"),dataIndex:"nationalCode",key:"nationalCode"},{title:Z("email"),dataIndex:"emailAddress",key:"emailAddress",width:220,render:function(e,r,n){return(0,S.jsx)("a",{href:"mailto:".concat(e),children:e})}},{title:Z("baseSalary"),dataIndex:"baseSalary",key:"baseSalary",render:function(e){return(0,S.jsx)(p.Z,{value:e})}},{title:Z("organizationLevel"),dataIndex:"organizationLevelName",key:"organizationLevelName",width:200,render:function(e){return(0,S.jsx)("span",{children:e})}},{title:Z("enabled"),dataIndex:"enabled",key:"enabled",width:100,render:function(e,r,n){return r.isEnabled?Z("yes"):Z("no")}}],scrollX:1100,deleteAction:{url:function(e){return m.Z.userManager.delete(e.id)}},addUrl:m.Z.userManager.add,editAction:{url:m.Z.userManager.update},customActions:[{renderer:function(e,r,n,t){var l;return(0,S.jsx)(a.Z,{danger:t?void 0:r.isEnabled,type:t?"ghost":"primary",shape:t?"default":"circle",title:null!==(l=r.isEnabled?Z("deactive"):Z("activate"))&&void 0!==l?l:"",icon:t?void 0:(0,S.jsx)(c.Z,{name:r.isEnabled?"IoLockClosedOutline":"IoShieldCheckmarkOutline"}),onClick:function(){return w({user:r,updater:n})},children:t?r.isEnabled?Z("deactive"):Z("activate"):null})}},{renderer:function(e,r,n,t){var l;return(0,S.jsx)(a.Z,{type:t?"ghost":"primary",shape:t?"default":"circle",title:null!==(l=Z("resetPassword"))&&void 0!==l?l:"",icon:t?void 0:(0,S.jsx)(c.Z,{name:"MdLockReset"}),onClick:function(){return P(r)},children:t?Z("resetPassword"):null})}}],entryModalWidth:1e3,initialValues:{isEnabled:!0},children:(0,S.jsx)(o.Z.Item,{name:"search",rules:[],children:(0,S.jsx)(d.Z,{style:{width:250},placeholder:null!==(e=Z("search"))&&void 0!==e?e:""})})}),(0,S.jsx)(u.Z,{open:!!b,loading:M,onOk:function(){N.post(m.Z.userManager.changeStatus(b.user.id,!b.user.isEnabled))},title:null!==(r=Z("userAccount"))&&void 0!==r?r:"",message:null!==(n=null!==b&&void 0!==b&&b.user.isEnabled?Z("areYouSureToDeactive"):Z("areYouSureToActivate"))&&void 0!==n?n:"",onCancel:function(){return w(null)}}),C&&(0,S.jsx)(k,{onClose:function(){return P(null)},data:C})]})}},7128:function(e,r,n){n.d(r,{Z:function(){return p}});var t=n(7462),l=n(4942),i=n(9439),a=n(1694),o=n.n(a),d=n(2791),s=n(1929),u=n(5564),c=n(9922),m=n(7521),h=function(e){var r,n=e.componentCls,i=e.sizePaddingEdgeHorizontal,a=e.colorSplit,o=e.lineWidth;return(0,l.Z)({},n,(0,t.Z)((0,t.Z)({},(0,m.Wf)(e)),(r={borderBlockStart:o+"px solid "+a,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",margin:"0 "+e.dividerVerticalGutterMargin+"px",verticalAlign:"middle",borderTop:0,borderInlineStart:o+"px solid "+a},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:e.dividerHorizontalGutterMargin+"px 0"},"&-horizontal&-with-text":{display:"flex",margin:e.dividerHorizontalWithTextGutterMargin+"px 0",color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:"0 "+a,"&::before, &::after":{position:"relative",top:"50%",width:"50%",borderBlockStart:o+"px solid transparent",borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},"&-horizontal&-with-text-left":{"&::before":{top:"50%",width:"5%"},"&::after":{top:"50%",width:"95%"}},"&-horizontal&-with-text-right":{"&::before":{top:"50%",width:"95%"},"&::after":{top:"50%",width:"5%"}}},(0,l.Z)(r,n+"-inner-text",{display:"inline-block",padding:"0 1em"}),(0,l.Z)(r,"&-dashed",{background:"none",borderColor:a,borderStyle:"dashed",borderWidth:o+"px 0 0"}),(0,l.Z)(r,"&-horizontal&-with-text&-dashed",{"&::before, &::after":{borderStyle:"dashed none none"}}),(0,l.Z)(r,"&-vertical&-dashed",{borderInlineStart:o,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0}),(0,l.Z)(r,"&-plain&-with-text",{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize}),(0,l.Z)(r,"&-horizontal&-with-text-left&-no-default-orientation-margin-left",(0,l.Z)({"&::before":{width:0},"&::after":{width:"100%"}},n+"-inner-text",{paddingInlineStart:i})),(0,l.Z)(r,"&-horizontal&-with-text-right&-no-default-orientation-margin-right",(0,l.Z)({"&::before":{width:"100%"},"&::after":{width:0}},n+"-inner-text",{paddingInlineEnd:i})),r)))},f=(0,u.Z)("Divider",(function(e){var r=(0,c.TS)(e,{dividerVerticalGutterMargin:e.marginXS,dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG});return[h(r)]}),{sizePaddingEdgeHorizontal:0}),x=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(t=Object.getOwnPropertySymbols(e);l<t.length;l++)r.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]])}return n},p=function(e){var r,n=d.useContext(s.E_),a=n.getPrefixCls,u=n.direction,c=e.prefixCls,m=e.type,h=void 0===m?"horizontal":m,p=e.orientation,Z=void 0===p?"center":p,g=e.orientationMargin,v=e.className,b=e.children,w=e.dashed,j=e.plain,y=x(e,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),S=a("divider",c),I=f(S),C=(0,i.Z)(I,2),k=C[0],P=C[1],z=Z.length>0?"-"+Z:Z,E=!!b,N="left"===Z&&null!=g,M="right"===Z&&null!=g,q=o()(S,P,S+"-"+h,(r={},(0,l.Z)(r,S+"-with-text",E),(0,l.Z)(r,S+"-with-text"+z,E),(0,l.Z)(r,S+"-dashed",!!w),(0,l.Z)(r,S+"-plain",!!j),(0,l.Z)(r,S+"-rtl","rtl"===u),(0,l.Z)(r,S+"-no-default-orientation-margin-left",N),(0,l.Z)(r,S+"-no-default-orientation-margin-right",M),r),v),L=(0,t.Z)((0,t.Z)({},N&&{marginLeft:g}),M&&{marginRight:g});return k(d.createElement("div",(0,t.Z)({className:q},y,{role:"separator"}),b&&"vertical"!==h&&d.createElement("span",{className:S+"-inner-text",style:L},b)))}}}]);
//# sourceMappingURL=567.01132334.chunk.js.map