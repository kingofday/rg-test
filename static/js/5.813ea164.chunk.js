"use strict";(self.webpackChunkregional_water=self.webpackChunkregional_water||[]).push([[5],{2580:function(i,e,n){n.d(e,{Z:function(){return g}});var l=n(3433),t=n(9439),o=n(914),r=n(8993),a=n(458),d=n(9530),s=n(543),u=function(i){var e=i.location,n=i.entryFrm,l=i.namePrefix,o=(0,s.Z)({autoCallUrl:d.Z.locations.counties,cachingLifeTimeInSeconds:60}),r=(0,t.Z)(o,3),a=(r[0],r[1]),u=r[2],c=(0,s.Z)({cachingLifeTimeInSeconds:60,autoCallUrl:null!==e&&void 0!==e&&e.countyId?d.Z.locations.districs(null===e||void 0===e?void 0:e.countyId.toString()):void 0}),v=(0,t.Z)(c,3),f=v[0],g=v[1],Z=v[2],h=(0,s.Z)({cachingLifeTimeInSeconds:60,autoCallUrl:null!==e&&void 0!==e&&e.districtId?d.Z.locations.cities(null===e||void 0===e?void 0:e.districtId.toString()):void 0}),m=(0,t.Z)(h,3),p=m[0],x=m[1],y=m[2],I=(0,s.Z)({cachingLifeTimeInSeconds:60,autoCallUrl:null!==e&&void 0!==e&&e.districtId?d.Z.locations.ruralDistricts(null===e||void 0===e?void 0:e.districtId.toString()):void 0}),C=(0,t.Z)(I,3),b=C[0],j=C[1],S=C[2],w=(0,s.Z)({cachingLifeTimeInSeconds:60,autoCallUrl:null!==e&&void 0!==e&&e.ruralDistrictId?d.Z.locations.villages(null===e||void 0===e?void 0:e.ruralDistrictId.toString()):void 0}),k=(0,t.Z)(w,3),F=k[0],D=k[1],V=k[2];return{loadingCounties:a,counties:u,onCountyChanged:function(i){n.resetFields([l?[l,"districtId"]:"districtId",l?[l,"cityId"]:"cityId",l?[l,"ruralDistrictId"]:"ruralDistrictId",l?[l,"villageId"]:"villageId"]);n.getFieldInstance(l?[l,"districtId"]:"districtId");n.setFieldValue(l?[l,"districtId"]:"districtId",""),n.setFieldValue(l?[l,"cityId"]:"cityId",""),n.setFieldValue(l?[l,"ruralDistrictId"]:"ruralDistrictId",""),n.setFieldValue(l?[l,"villageId"]:"villageId",""),""!==i&&f.get(d.Z.locations.districs(i))},loadingDistricts:g,districts:Z,onDistrictChanged:function(i){n.resetFields([l?[l,"cityId"]:"cityId",l?[l,"ruralDistrictId"]:"ruralDistrictId",l?[l,"villageId"]:"villageId"]),n.setFieldValue(l?[l,"cityId"]:"cityId",""),n.setFieldValue(l?[l,"ruralDistrictId"]:"ruralDistrictId",""),n.setFieldValue(l?[l,"villageId"]:"villageId",""),""!==i&&(p.get(d.Z.locations.cities(i)),b.get(d.Z.locations.ruralDistricts(i)))},loadingCities:x,cities:y,getRuralDistricts:b,loadingRuralDistricts:j,ruralDistricts:S,onRuralDistrictsChanged:function(i){n.resetFields([l?[l,"villageId"]:"villageId"]),n.setFieldValue(l?[l,"villageId"]:"villageId",""),""!==i&&F.get(d.Z.locations.villages(i))},loadingVillages:D,villages:V}},c=n(2791),v=n(2020),f=n(184),g=function(i){var e,n,d,s,g,Z=i.entryFrm,h=i.data,m=i.namePrefix,p=i.readOnly,x=i.hideIfCityIdSelected,y=(0,v.$)().t,I=u({entryFrm:Z,location:h,namePrefix:m}),C=I.loadingCounties,b=I.counties,j=I.onCountyChanged,S=I.loadingDistricts,w=I.districts,k=I.onDistrictChanged,F=I.loadingCities,D=I.cities,V=I.loadingRuralDistricts,M=I.ruralDistricts,P=I.onRuralDistrictsChanged,z=I.loadingVillages,U=I.villages,E=(0,c.useState)(null===h||void 0===h?void 0:h.cityId),O=(0,t.Z)(E,2),T=O[0],N=O[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.Z,{xs:12,sm:8,md:6,children:(0,f.jsx)(r.Z.Item,{name:m?[m,"countyId"]:"countyId",label:y("county"),children:(0,f.jsx)(a.Z,{allowClear:!0,showSearch:!0,placeholder:y("county"),loading:C,onChange:j,disabled:p,options:[{label:y("selcet"),value:""}].concat((0,l.Z)(null!==(e=null===b||void 0===b?void 0:b.map((function(i){return{label:i.name,value:i.id}})))&&void 0!==e?e:[]))})})}),(0,f.jsx)(o.Z,{xs:12,sm:8,md:6,children:(0,f.jsx)(r.Z.Item,{name:m?[m,"districtId"]:"districtId",label:y("district"),children:(0,f.jsx)(a.Z,{allowClear:!0,showSearch:!0,placeholder:y("district"),loading:S,onChange:k,disabled:p,options:[{label:y("selcet"),value:""}].concat((0,l.Z)(null!==(n=null===w||void 0===w?void 0:w.map((function(i){return{label:i.name,value:i.id}})))&&void 0!==n?n:[]))})})}),(0,f.jsx)(o.Z,{xs:12,sm:8,md:6,children:(0,f.jsx)(r.Z.Item,{name:m?[m,"cityId"]:"cityId",label:y("city"),children:(0,f.jsx)(a.Z,{allowClear:!0,showSearch:!0,placeholder:y("city"),loading:F,disabled:p,onChange:N,options:[{label:y("selcet"),value:""}].concat((0,l.Z)(null!==(d=null===D||void 0===D?void 0:D.map((function(i){return{label:i.name,value:i.id}})))&&void 0!==d?d:[]))})})}),T&&x?null:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.Z,{xs:12,sm:8,md:6,children:(0,f.jsx)(r.Z.Item,{name:m?[m,"ruralDistrictId"]:"ruralDistrictId",label:y("rural"),children:(0,f.jsx)(a.Z,{allowClear:!0,showSearch:!0,placeholder:y("rural"),loading:V,onChange:P,disabled:p,options:[{label:y("selcet"),value:""}].concat((0,l.Z)(null!==(s=null===M||void 0===M?void 0:M.map((function(i){return{label:i.name,value:i.id}})))&&void 0!==s?s:[]))})})}),(0,f.jsx)(o.Z,{xs:12,sm:8,md:6,children:(0,f.jsx)(r.Z.Item,{name:m?[m,"villageId"]:"villageId",label:y("village"),children:(0,f.jsx)(a.Z,{allowClear:!0,showSearch:!0,placeholder:y("village"),loading:z,disabled:p,options:[{label:y("selcet"),value:""}].concat((0,l.Z)(null!==(g=null===U||void 0===U?void 0:U.map((function(i){return{label:i.name,value:i.id}})))&&void 0!==g?g:[]))})})})]})]})}},5485:function(i,e,n){n.d(e,{Z:function(){return F}});var l=n(4942),t=n(3433),o=n(1413),r=n(9439),a=n(4916),d=n(8993),s=n(7309),u=n(294),c=n(3099),v=n(4525),f=n(4021),g=n(2166),Z=n(5486),h=n(8467),m=n(2791),p=(0,m.createContext)({}),x=n(543),y=n(2020),I=n(502),C=n(5761),b=n(184),j=function(i){var e=(0,y.$)().t,n=(0,x.Z)({onSuccess:function(e){i.afterSelect(e)}}),l=(0,r.Z)(n,2),t=l[0],o=l[1];return(0,b.jsx)(s.Z,{loading:o,type:i.isMobile?"ghost":"primary",shape:i.isMobile?"default":"circle",icon:i.isMobile?void 0:(0,b.jsx)(g.Z,{size:i.isMobile?20:10,name:"IoPencilOutline"}),onClick:function(){if(i.findUrl){var e="string"===typeof i.findUrl?"".concat(i.findUrl,"?").concat(i.idProp,"=").concat(i.record[i.idProp]):i.findUrl(i.record);t.get(e)}else i.afterSelect(i.record)},children:i.isMobile?e("edit"):null})},S=function(i){var e=d.Z.useForm(),n=(0,r.Z)(e,1)[0];return(0,b.jsx)(f.Z,{destroyOnClose:!0,open:!0,onCancel:i.onCancel,title:i.title,onOk:function(){n.submit()},okButtonProps:{loading:i.loading},width:i.entryModalWidth,children:(0,b.jsx)(d.Z,{id:"entry-form",layout:"vertical",form:n,initialValues:i.initialValues,onFinish:i.onEntrySubmit,autoComplete:"off",children:(0,b.jsx)(i.EntryForm,{form:n,data:i.initialValues})})})},w=function(i){var e=(0,y.$)().t;return(0,b.jsx)(s.Z,{danger:!0,type:i.isMobile?"ghost":"primary",shape:i.isMobile?"default":"circle",icon:i.isMobile?void 0:(0,b.jsx)(g.Z,{size:i.isMobile?20:10,name:"IoTrashOutline"}),onClick:i.onClick,children:i.isMobile?e("delete"):null})},k=a.Z.Panel,F=function(i){var e,n=i.id,F=i.title,D=i.columns,V=i.idProp,M=i.filterUrl,P=i.findUrl,z=i.addUrl,U=i.initialValues,E=i.disablePaging,O=i.EntryForm,T=i.children,N=i.deleteAction,A=i.editAction,R=i.pageSize,L=void 0===R?15:R,W=i.handleSubmit,B=void 0===W||W,$=i.customActions,_=i.buttons,K=i.scrollX,Y=void 0===K?"1500px":K,q=i.filtersHeight,H=i.scrollY,Q=i.entryModalWidth,X=i.enableRowNumber,G=void 0===X||X,J=(0,y.$)().t,ii=d.Z.useForm(),ei=(0,r.Z)(ii,1)[0],ni=(0,m.useState)(!1),li=(0,r.Z)(ni,2),ti=li[0],oi=li[1],ri=(0,m.useState)(!0),ai=(0,r.Z)(ri,2),di=ai[0],si=ai[1],ui=(0,m.useState)(null),ci=(0,r.Z)(ui,2),vi=ci[0],fi=ci[1],gi=(0,m.useState)(null),Zi=(0,r.Z)(gi,2),hi=Zi[0],mi=Zi[1],pi=(0,m.useState)(D),xi=(0,r.Z)(pi,2),yi=xi[0],Ii=xi[1],Ci=(0,m.useState)({page:1,pageSize:L}),bi=(0,r.Z)(Ci,2),ji=bi[0],Si=bi[1],wi=(0,m.useRef)(1),ki=(0,x.Z)({initLoading:!0}),Fi=(0,r.Z)(ki,4),Di=Fi[0],Vi=Fi[1],Mi=Fi[2],Pi=Fi[3],zi=(0,x.Z)({onSuccess:function(i,e){Ki(e)}}),Ui=(0,r.Z)(zi,2),Ei=Ui[0],Oi=Ui[1],Ti=(0,x.Z)({onSuccess:function(i,e){Yi(e?(0,o.Z)((0,o.Z)({},e),i):i)}}),Ni=(0,r.Z)(Ti,2),Ai=Ni[0],Ri=Ni[1],Li=(0,x.Z)({onSuccess:function(i,e){var n=V,l=null===e||void 0===e?void 0:e[n];l&&Pi((function(i){var e;return(0,o.Z)((0,o.Z)({},i),{},{totalEntitiesCount:null!==(e=null===i||void 0===i?void 0:i.totalEntitiesCount)&&void 0!==e?e:0,results:null===i||void 0===i?void 0:i.results.filter((function(i){return i[n]!==l}))})})),mi(null)}}),Wi=(0,r.Z)(Li,2),Bi=Wi[0],$i=Wi[1],_i=(0,m.useMemo)((function(){return window.outerWidth<Z.Z.breakpoints.xl}),[]),Ki=function(i){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=V,l=null===i||void 0===i?void 0:i[n];l&&Pi((function(e){return(0,o.Z)((0,o.Z)({},e),{},{results:null===e||void 0===e?void 0:e.results.map((function(e){return e[n]===l?(0,o.Z)((0,o.Z)({},e),i):e}))})})),e&&oi(!1)},Yi=function(i){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=V,l=null===i||void 0===i?void 0:i[n];l&&Pi((function(e){var n,l;return(0,o.Z)((0,o.Z)({},e),{},{totalEntitiesCount:null!==(n=null===e||void 0===e?void 0:e.totalEntitiesCount)&&void 0!==n?n:1,results:[i].concat((0,t.Z)(null!==(l=null===e||void 0===e?void 0:e.results)&&void 0!==l?l:[]))})})),e&&oi(!1)},qi=function(i){fi(i),oi(!0)},Hi=function(i){mi(i)},Qi=(0,m.useMemo)((function(){var i;if((!$||!$.length)&&!A&&!N)return null;var e=(null!==(i=null===$||void 0===$?void 0:$.length)&&void 0!==i?i:0)+(A?1:0)+(N?1:0);return{title:(0,b.jsx)(g.Z,{name:"IoBuildOutline"}),align:"center",key:"actions",fixed:"right",width:_i?30:25*e+8*(e-1)+40,dataIndex:"actions",render:function(i,e,n){if(_i){var l=[];return A&&l.push({key:"edit",label:(0,b.jsx)(j,{findUrl:P,afterSelect:qi,idProp:V,record:e,isMobile:!0})}),N&&l.push({key:"delete",label:(0,b.jsx)(w,{isMobile:!0,onClick:function(){return Hi(e)}})}),null!==$&&void 0!==$&&$.length&&(l=l.concat($.map((function(n,l){var t;return{key:"action-"+l,label:n.renderer?n.renderer(i,e,Pi,_i):(0,b.jsx)(s.Z,{type:_i?"ghost":"primary",shape:_i?"default":"circle",icon:(0,b.jsx)(g.Z,{size:_i?20:10,name:null!==(t=n.icon)&&void 0!==t?t:"BsDash"}),onClick:function(){var i;return null===(i=n.action)||void 0===i?void 0:i.call(n,e,Pi)}},l)}})))),(0,b.jsx)(u.Z,{menu:{items:l},children:(0,b.jsx)("a",{onClick:function(i){return i.preventDefault()},children:(0,b.jsx)(g.Z,{name:"FaEllipsisV"})})})}return(0,b.jsxs)(c.Z,{className:"actions",children:[!!A&&(0,b.jsx)(j,{findUrl:P,afterSelect:qi,idProp:V,record:e}),!!N&&(0,b.jsx)(w,{onClick:function(){return Hi(e)}}),!!$&&$.map((function(n,l){var t;return n.renderer?n.renderer(i,e,Pi):(0,b.jsx)(s.Z,{type:"primary",shape:"circle",icon:(0,b.jsx)(g.Z,{size:10,name:null!==(t=n.icon)&&void 0!==t?t:"BsDash"}),onClick:function(){var i;return null===(i=n.action)||void 0===i?void 0:i.call(n,e,Pi)}},l)}))]})}}}),[$]),Xi=function(i){Di.get("".concat(M,"?").concat(h.Z.convertToQueryString((0,o.Z)((0,o.Z)({},ji),i)).toString()))},Gi=function(){fi(null),oi(!1)};(0,m.useEffect)((function(){Xi(ei.getFieldsValue())}),[]);var Ji=(0,m.useMemo)((function(){var i=Qi?[].concat((0,t.Z)(yi.filter((function(i){return"rowNumber"!==i.key})).map((function(i){return(0,o.Z)((0,o.Z)({},i),{},{fixed:window.outerWidth<Z.Z.breakpoints.lg?void 0:i.fixed})}))),[Qi]):yi.filter((function(i){return"rowNumber"!==i.key}));return G&&i.unshift({key:"rowNumber",title:"#",width:80,fixed:window.outerWidth<Z.Z.breakpoints.lg?void 0:"left",render:function(i,e,n){return(0,b.jsx)("span",{children:(wi.current-1)*ji.pageSize+n+1})}}),i}),[yi]);return(0,b.jsx)(p.Provider,{value:{form:ei},children:(0,b.jsxs)(C.Z,{id:n,title:F,className:"admin",children:[(0,b.jsx)(a.Z,{defaultActiveKey:["filters"],onChange:function(){return si((function(i){return!i}))},children:(0,b.jsx)(k,{header:J("filters"),extra:z?(0,b.jsx)(s.Z,{icon:(0,b.jsx)(g.Z,{name:"IoAdd"}),onClick:function(i){i.stopPropagation(),fi(null),oi(!0)},type:"primary",size:"small",title:null!==(e=J("add"))&&void 0!==e?e:"",children:(0,b.jsx)("small",{children:J("add")})}):null,children:(0,b.jsxs)(d.Z,{name:"filters",form:ei,initialValues:U,onFinish:function(i){Si((function(i){return(0,o.Z)((0,o.Z)({},i),{},{page:1})})),wi.current=1,(D.length!==yi.length||D.some((function(i){return!yi.map((function(i){return i.key})).includes(i.key)})))&&Ii(D),Xi((0,o.Z)((0,o.Z)({},i),{},{page:1}))},autoComplete:"off",children:[T,(0,b.jsxs)(d.Z.Item,{className:"flex-row-end btns",children:[null===_||void 0===_?void 0:_.map((function(i){var e;return(0,b.jsx)(s.Z,{type:null!==(e="primary")?e:i.type,htmlType:"button",style:i.style,className:i.className,onClick:function(e){return i.onClick(e,ei.getFieldsValue())},children:i.children})})),(0,b.jsx)(s.Z,{type:"primary",htmlType:"submit",children:J("filter")})]})]})},"filters")}),(0,b.jsx)(v.Z,{loading:Vi,direction:"rtl",rowKey:V,columns:Ji,dataSource:null===Mi?void 0:(0,t.Z)(Mi.results),onChange:function(i,e,n){var l,t,r,a;Si({page:null!==(l=i.current)&&void 0!==l?l:1,pageSize:null!==(t=i.pageSize)&&void 0!==t?t:15}),wi.current=null!==(r=i.current)&&void 0!==r?r:1,Xi((0,o.Z)((0,o.Z)({},ei.getFieldsValue()),{},{page:null!==(a=i.current)&&void 0!==a?a:1}))},scroll:{x:Y,y:H?H+(di?0:null!==q&&void 0!==q?q:0):H},pagination:E?void 0:{pageSize:ji.pageSize,current:ji.page,total:null===Mi||void 0===Mi?void 0:Mi.totalEntitiesCount}},"table-".concat(V)),!!O&&(B?ti?(0,b.jsx)(S,{EntryForm:O,onCancel:Gi,onEntrySubmit:function(i){A&&vi?Ei.put(A.url,i):z&&!vi&&Ai.post(z,i)},entryModalWidth:Q,title:J(vi?"edit":"add"),initialValues:null!==vi&&void 0!==vi?vi:void 0,loading:Ri||Oi}):null:ti?(0,b.jsx)(f.Z,{destroyOnClose:!0,open:!0,onCancel:Gi,title:J(vi?"edit":"add"),footer:null,width:Q,children:(0,b.jsx)(O,{onCancel:function(){return oi(!1)},data:vi,onSuccess:vi?Ki:Yi})}):null),(0,b.jsx)(I.Z,{open:!!hi,loading:$i,onOk:function(){if(hi&&N){var i,e;if("string"!==typeof(null===N||void 0===N?void 0:N.url)&&~(null===N||void 0===N?void 0:N.url(hi).indexOf("?")))throw new Error("delete url cannot have query strings");var n="string"===typeof(null===N||void 0===N?void 0:N.url)?"".concat(N.url):null===N||void 0===N?void 0:N.url(hi);Bi.delete(n,(0,l.Z)({},null!==(i=null===N||void 0===N?void 0:N.sendingProp)&&void 0!==i?i:V,hi[null!==(e=null===N||void 0===N?void 0:N.sendingProp)&&void 0!==e?e:V]))}},onCancel:function(){return mi(null)}})]})})}},502:function(i,e,n){var l=n(3655),t=n(4021),o=n(2020),r=n(184),a=l.Z.Paragraph;e.Z=function(i){var e=i.open,n=i.onOk,l=i.loading,d=i.onCancel,s=i.title,u=i.message,c=(0,o.$)().t;return(0,r.jsx)(t.Z,{title:null!==s&&void 0!==s?s:c("delete"),open:e,onOk:n,onCancel:d,okButtonProps:{danger:!0,loading:l},children:(0,r.jsx)(a,{children:u||c("areYouSure")})})}},6129:function(i,e,n){var l=n(8467),t=n(184);e.Z=function(i){var e=i.value,n=i.enabelCopy,o=void 0===n||n;return(0,t.jsx)("span",{onClick:o?function(){return l.Z.copyToClipboard(e)}:void 0,title:e,children:l.Z.commaThousondSeperator("string"===typeof e?parseFloat(e):e)})}},3447:function(i,e){e.Z={nationalCode:/\d{10}/,personelId:/\d{4}/,email:/\S+@\S+\.\S+/,mobile:/09[0-9]{2}(-| )?[0-9]{3}(-| )?[0-9]{4}/,phone:/0\d{10}/,ip:/(?:[0-9]{1,3}\.){3}[0-9]{1,3}/,postalCode:/\d{10}/,url:/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)/}}}]);
//# sourceMappingURL=5.813ea164.chunk.js.map