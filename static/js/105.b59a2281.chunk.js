"use strict";(self.webpackChunkregional_water=self.webpackChunkregional_water||[]).push([[105],{2730:function(e,l,i){var n=i(3433),a=i(914),r=i(8993),t=i(458),s=i(7137),d=i(2020),o=i(184);l.Z=function(e){var l,i,c,u,m,v=e.entryFrm,h=e.data,Z=e.namePrefix,g=e.readOnly,x=(0,d.$)().t,p=(0,s.Z)({entryFrm:v,location:h,namePrefix:Z}),I=p.loadingCounties,f=p.counties,j=p.onCountyChanged,b=p.loadingDistricts,y=p.districts,C=p.onDistrictChanged,w=p.loadingCities,S=p.cities,F=p.loadingRuralDistricts,N=p.ruralDistricts,D=p.onRuralDistrictsChanged,q=p.loadingVillages,A=p.villages;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.Z,{xs:12,sm:8,md:6,children:(0,o.jsx)(r.Z.Item,{name:Z?[Z,"countyId"]:"countyId",label:x("county"),children:(0,o.jsx)(t.Z,{allowClear:!0,showSearch:!0,placeholder:x("county"),loading:I,onChange:j,disabled:g,options:[{label:x("selcet"),value:""}].concat((0,n.Z)(null!==(l=null===f||void 0===f?void 0:f.map((function(e){return{label:e.name,value:e.id}})))&&void 0!==l?l:[]))})})}),(0,o.jsx)(a.Z,{xs:12,sm:8,md:6,children:(0,o.jsx)(r.Z.Item,{name:Z?[Z,"districtId"]:"districtId",label:x("district"),children:(0,o.jsx)(t.Z,{allowClear:!0,showSearch:!0,placeholder:x("district"),loading:b,onChange:C,disabled:g,options:[{label:x("selcet"),value:""}].concat((0,n.Z)(null!==(i=null===y||void 0===y?void 0:y.map((function(e){return{label:e.name,value:e.id}})))&&void 0!==i?i:[]))})})}),(0,o.jsx)(a.Z,{xs:12,sm:8,md:6,children:(0,o.jsx)(r.Z.Item,{name:Z?[Z,"cityId"]:"cityId",label:x("city"),children:(0,o.jsx)(t.Z,{allowClear:!0,showSearch:!0,placeholder:x("city"),loading:w,disabled:g,options:[{label:x("selcet"),value:""}].concat((0,n.Z)(null!==(c=null===S||void 0===S?void 0:S.map((function(e){return{label:e.name,value:e.id}})))&&void 0!==c?c:[]))})})}),(0,o.jsx)(a.Z,{xs:12,sm:8,md:6,children:(0,o.jsx)(r.Z.Item,{name:Z?[Z,"ruralDistrictId"]:"ruralDistrictId",label:x("rural"),children:(0,o.jsx)(t.Z,{allowClear:!0,showSearch:!0,placeholder:x("rural"),loading:F,onChange:D,disabled:g,options:[{label:x("selcet"),value:""}].concat((0,n.Z)(null!==(u=null===N||void 0===N?void 0:N.map((function(e){return{label:e.name,value:e.id}})))&&void 0!==u?u:[]))})})}),(0,o.jsx)(a.Z,{xs:12,sm:8,md:6,children:(0,o.jsx)(r.Z.Item,{name:Z?[Z,"villageId"]:"villageId",label:x("village"),children:(0,o.jsx)(t.Z,{allowClear:!0,showSearch:!0,placeholder:x("village"),loading:q,disabled:g,options:[{label:x("selcet"),value:""}].concat((0,n.Z)(null!==(m=null===A||void 0===A?void 0:A.map((function(e){return{label:e.name,value:e.id}})))&&void 0!==m?m:[]))})})})]})}},6129:function(e,l,i){var n=i(8467),a=i(184);l.Z=function(e){var l=e.value,i=e.enabelCopy,r=void 0===i||i;return(0,a.jsx)("span",{onClick:r?function(){return n.Z.copyToClipboard(l)}:void 0,title:l,children:n.Z.commaThousondSeperator("string"===typeof l?parseFloat(l):l)})}},2105:function(e,l,i){i.r(l),i.d(l,{default:function(){return N}});var n=i(3433),a=i(1413),r=i(9439),t=i(7309),s=i(6106),d=i(914),o=i(8993),c=i(177),u=i(5757),m=i(502),v=i(7564),h=i(9530),Z=i(6810),g=i(2791),x=i(2020),p=i(6129),I=i(2014),f=i(458),j=i(7097),b=i(8467),y=i(184),C=function(e){var l,i=(0,x.$)().t,n=e.form||o.Z,a=(0,g.useMemo)((function(){var l,n=[];return e.notRequired||n.push({required:!0,message:null!==(l=i("required"))&&void 0!==l?l:""}),"undefined"!==typeof e.min&&n.push({validator:function(l,n,a){return n&&parseFloat(n)<e.min?Promise.reject(new Error(null!==(r=i("minAmountIsX",{amount:b.Z.commaThousondSeperator(e.min)}))&&void 0!==r?r:"")):Promise.resolve();var r}}),"undefined"!==typeof e.max&&n.push({validator:function(l,n,a){return n&&parseFloat(n)>e.max?Promise.reject(new Error(null!==(r=i("maxAmountIsX",{amount:b.Z.commaThousondSeperator(e.max)}))&&void 0!==r?r:"")):Promise.resolve();var r}}),n}),[e.notRequired,e.min,e.max]);return(0,y.jsx)(n.Item,{name:e.name||"amount",label:e.label||i("amount"),rules:a,children:(0,y.jsx)(j.Z,{readOnly:e.readOnly,stringMode:e.stringMode,formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return parseFloat(e.replace(/\$\s?|(,*)/g,""))},placeholder:e.placeholder,className:"ltr-elm placeholder-r w-100 ".concat(e.className),controls:!1,style:{paddingRight:11},prefix:null!==(l=i("baseCurrency"))&&void 0!==l?l:e.unit})})},w=i(3447),S=i(2730),F=function(e){var l,i,n,t,u,m,v,g,p,j,b,F,N,D,q,A,k,E,L,M,P,U,V=e.data,T=e.form,z=(0,x.$)().t,R=(0,Z.Z)({autoCallUrl:h.Z.userManager.roles,cachingLifeTimeInSeconds:60}),O=(0,r.Z)(R,3),$=O[1],X=O[2],_=(0,Z.Z)({autoCallUrl:h.Z.organizationLevel.list,cachingLifeTimeInSeconds:60,mapper:function(e){var l=[];return e&&function e(i){i.nodes&&i.nodes.length?i.nodes.forEach((function(l){return e((0,a.Z)((0,a.Z)({},l),{},{name:"".concat(i.name,"/").concat(l.name)}))})):l.push(i)}(e),l}}),B=(0,r.Z)(_,3),W=B[1],G=B[2];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(o.Z.Item,{noStyle:!0,name:"id",children:(0,y.jsx)(c.Z,{type:"hidden"})}),(0,y.jsxs)(s.Z,{gutter:16,children:[(0,y.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,y.jsx)(o.Z.Item,{name:"firstName",label:z("firstName"),rules:[{required:!0,message:null!==(l=z("required"))&&void 0!==l?l:""}],children:(0,y.jsx)(c.Z,{placeholder:null!==(i=z("firstName"))&&void 0!==i?i:""})})}),(0,y.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,y.jsx)(o.Z.Item,{name:"lastName",label:z("lastName"),rules:[{required:!0,message:null!==(n=z("required"))&&void 0!==n?n:""}],children:(0,y.jsx)(c.Z,{placeholder:null!==(t=z("lastName"))&&void 0!==t?t:""})})}),(0,y.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,y.jsx)(o.Z.Item,{name:"nationalCode",label:z("nationalCode"),rules:[{required:!0,message:null!==(u=z("required"))&&void 0!==u?u:""},{pattern:w.Z.nationalCode,message:null!==(m=z("wrongFormat"))&&void 0!==m?m:""}],children:(0,y.jsx)(c.Z,{readOnly:!!V,placeholder:null!==(v=z("nationalCode"))&&void 0!==v?v:"",className:"ltr-elm placeholder-r"})})}),(0,y.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,y.jsx)(o.Z.Item,{valuePropName:"checked",name:"isEnabled",label:" ",children:(0,y.jsx)(I.Z,{children:z("isEnabled")})})}),!V&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,y.jsx)(o.Z.Item,{name:"password",label:z("password"),rules:[{required:!0,message:null!==(g=z("required"))&&void 0!==g?g:""},{min:8,message:null!==(p=z("atleastXChar",{x:8}))&&void 0!==p?p:""}],children:(0,y.jsx)(c.Z.Password,{placeholder:null!==(j=z("password"))&&void 0!==j?j:"",className:"ltr-elm placeholder-r"})})}),(0,y.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,y.jsx)(o.Z.Item,{name:"passwordConfirm",label:z("confirmPassword"),rules:[{required:!0,message:null!==(b=z("required"))&&void 0!==b?b:""},function(e){var l=e.getFieldValue;return{validator:function(e,i){var n;return l("password")===i?Promise.resolve():Promise.reject(new Error(null!==(n=z("passwordsMissMatch"))&&void 0!==n?n:""))}}}],children:(0,y.jsx)(c.Z.Password,{placeholder:null!==(F=z("confirmPassword"))&&void 0!==F?F:"",className:"ltr-elm  placeholder-r"})})})]}),(0,y.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,y.jsx)(o.Z.Item,{name:"personnelId",label:z("personnelId"),rules:[{required:!0,message:null!==(N=z("required"))&&void 0!==N?N:""},{pattern:w.Z.personelId,message:null!==(D=z("wrongFormat"))&&void 0!==D?D:""}],children:(0,y.jsx)(c.Z,{placeholder:null!==(q=z("personnelId"))&&void 0!==q?q:"",className:"ltr-elm placeholder-r"})})}),(0,y.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,y.jsx)(o.Z.Item,{name:"phoneNumber",label:z("mobileNumber"),rules:[{required:!0,message:null!==(A=z("required"))&&void 0!==A?A:""},{pattern:w.Z.mobile,message:null!==(k=z("wrongFormat"))&&void 0!==k?k:""}],children:(0,y.jsx)(c.Z,{placeholder:null!==(E=z("mobileNumber"))&&void 0!==E?E:"",className:"ltr-elm placeholder-r"})})}),(0,y.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,y.jsx)(C,{stringMode:!1,name:"baseSalary",label:null!==(L=z("baseSalary"))&&void 0!==L?L:"",placeholder:null!==(M=z("baseSalary"))&&void 0!==M?M:""})}),(0,y.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,y.jsx)(o.Z.Item,{name:"emailAddress",label:z("email"),rules:[{pattern:w.Z.email,message:null!==(P=z("wrongFormat"))&&void 0!==P?P:""}],children:(0,y.jsx)(c.Z,{placeholder:null!==(U=z("email"))&&void 0!==U?U:"",className:"ltr-elm placeholder-r"})})}),(0,y.jsx)(d.Z,{xs:24,sm:8,md:6,children:(0,y.jsx)(o.Z.Item,{name:"organizationLevelId",label:z("organizationLevel"),children:(0,y.jsx)(f.Z,{allowClear:!0,placeholder:z("organizationLevel"),options:null===G||void 0===G?void 0:G.map((function(e){return{label:e.name,value:e.id}})),loading:W})})}),(0,y.jsx)(d.Z,{xs:12,sm:8,md:6,children:(0,y.jsx)(o.Z.Item,{name:"roleIds",label:z("roles"),children:(0,y.jsx)(f.Z,{mode:"multiple",loading:$,placeholder:z("roles"),defaultValue:[],showArrow:!0,style:{width:"100%"},options:null===X||void 0===X?void 0:X.map((function(e){return{label:e.name,value:e.id}}))})})}),(0,y.jsx)(S.Z,{data:V,entryFrm:T})]})]})},N=function(){var e,l,i,I=(0,x.$)().t,f=(0,g.useState)(null),j=(0,r.Z)(f,2),b=j[0],C=j[1],w=(0,Z.Z)({onSuccess:function(e,l){null===b||void 0===b||b.updater((function(e){var l;return(0,a.Z)((0,a.Z)({},e),{},{results:(0,n.Z)(null!==(l=null===e||void 0===e?void 0:e.results.map((function(e){return e.id!==b.user.id?e:(0,a.Z)((0,a.Z)({},e),{},{isEnabled:!b.user.isEnabled})})))&&void 0!==l?l:[])})})),C(null)}}),S=(0,r.Z)(w,2),N=S[0],D=S[1];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(u.Z,{title:I("usersManagement"),id:"user",idProp:"id",EntryForm:F,filterUrl:h.Z.userManager.list,findUrl:function(e){return h.Z.userManager.find(e.id)},columns:[{title:I("fullName"),dataIndex:"fullName",key:"fullName",fixed:"left",render:function(e,l,i){return(0,y.jsx)("span",{children:"".concat(l.firstName," ").concat(l.lastName)})}},{title:I("nationalCode"),dataIndex:"nationalCode",key:"nationalCode"},{title:I("email"),dataIndex:"emailAddress",key:"emailAddress",width:220,render:function(e,l,i){return(0,y.jsx)("a",{href:"mailto:".concat(e),children:e})}},{title:I("baseSalary"),dataIndex:"baseSalary",key:"baseSalary",render:function(e){return(0,y.jsx)(p.Z,{value:e})}},{title:I("organizationLevel"),dataIndex:"organizationLevelName",key:"organizationLevelName",width:200,render:function(e){return(0,y.jsx)("span",{children:e})}}],scrollX:1e3,deleteAction:{url:function(e){return h.Z.userManager.delete(e.id)}},addUrl:h.Z.userManager.add,editAction:{url:h.Z.userManager.update},customActions:[{renderer:function(e,l,i){var n;return(0,y.jsx)(t.Z,{className:l.isEnabled?"btn-warn":"btn-success",danger:l.isEnabled,type:"primary",shape:"circle",title:null!==(n=l.isEnabled?I("deactiveUserAccount"):I("activateUserAccount"))&&void 0!==n?n:"",icon:(0,y.jsx)(v.Z,{name:l.isEnabled?"IoLockClosedOutline":"IoShieldCheckmarkOutline"}),onClick:function(){return C({user:l,updater:i})}})}}],entryModalWidth:1e3,children:(0,y.jsx)(s.Z,{gutter:[20,20],children:(0,y.jsx)(d.Z,{xs:24,sm:12,children:(0,y.jsx)(o.Z.Item,{name:"filter",rules:[],children:(0,y.jsx)(c.Z,{placeholder:null!==(e=I("search"))&&void 0!==e?e:""})})})})}),(0,y.jsx)(m.Z,{open:!!b,loading:D,onOk:function(){N.post(h.Z.userManager.changeStatus(b.user.id,!b.user.isEnabled))},title:null!==(l=I("userAccount"))&&void 0!==l?l:"",message:null!==(i=null!==b&&void 0!==b&&b.user.isEnabled?I("deactiveUserAccount"):I("activateUserAccount"))&&void 0!==i?i:"",onCancel:function(){return C(null)}})]})}},3447:function(e,l){l.Z={nationalCode:/\d{10}/,personelId:/\d{4}/,email:/\S+@\S+\.\S+/,mobile:/09[0-9]{2}(-| )?[0-9]{3}(-| )?[0-9]{4}/,phone:/0\d{10}/,ip:/(?:[0-9]{1,3}\.){3}[0-9]{1,3}/,postalCode:/\d{10}/,url:/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)/}},7137:function(e,l,i){var n=i(9439),a=i(9530),r=i(6810);l.Z=function(e){var l=e.location,i=e.entryFrm,t=e.namePrefix,s=(0,r.Z)({autoCallUrl:a.Z.locations.counties,cachingLifeTimeInSeconds:60}),d=(0,n.Z)(s,3),o=(d[0],d[1]),c=d[2],u=(0,r.Z)({cachingLifeTimeInSeconds:60,autoCallUrl:null!==l&&void 0!==l&&l.countyId?a.Z.locations.districs(null===l||void 0===l?void 0:l.countyId.toString()):void 0}),m=(0,n.Z)(u,3),v=m[0],h=m[1],Z=m[2],g=(0,r.Z)({cachingLifeTimeInSeconds:60,autoCallUrl:null!==l&&void 0!==l&&l.districtId?a.Z.locations.cities(null===l||void 0===l?void 0:l.districtId.toString()):void 0}),x=(0,n.Z)(g,3),p=x[0],I=x[1],f=x[2],j=(0,r.Z)({cachingLifeTimeInSeconds:60,autoCallUrl:null!==l&&void 0!==l&&l.districtId?a.Z.locations.ruralDistricts(null===l||void 0===l?void 0:l.districtId.toString()):void 0}),b=(0,n.Z)(j,3),y=b[0],C=b[1],w=b[2],S=(0,r.Z)({cachingLifeTimeInSeconds:60,autoCallUrl:null!==l&&void 0!==l&&l.ruralDistrictId?a.Z.locations.villages(null===l||void 0===l?void 0:l.ruralDistrictId.toString()):void 0}),F=(0,n.Z)(S,3),N=F[0],D=F[1],q=F[2];return{loadingCounties:o,counties:c,onCountyChanged:function(e){i.resetFields([t?[t,"districtId"]:"districtId",t?[t,"cityId"]:"cityId",t?[t,"ruralDistrictId"]:"ruralDistrictId",t?[t,"villageId"]:"villageId"]);i.getFieldInstance(t?[t,"districtId"]:"districtId");i.setFieldValue(t?[t,"districtId"]:"districtId",""),i.setFieldValue(t?[t,"cityId"]:"cityId",""),i.setFieldValue(t?[t,"ruralDistrictId"]:"ruralDistrictId",""),i.setFieldValue(t?[t,"villageId"]:"villageId",""),""!==e&&v.get(a.Z.locations.districs(e))},loadingDistricts:h,districts:Z,onDistrictChanged:function(e){i.resetFields([t?[t,"cityId"]:"cityId",t?[t,"ruralDistrictId"]:"ruralDistrictId",t?[t,"villageId"]:"villageId"]),i.setFieldValue(t?[t,"cityId"]:"cityId",""),i.setFieldValue(t?[t,"ruralDistrictId"]:"ruralDistrictId",""),i.setFieldValue(t?[t,"villageId"]:"villageId",""),""!==e&&(p.get(a.Z.locations.cities(e)),y.get(a.Z.locations.ruralDistricts(e)))},loadingCities:I,cities:f,getRuralDistricts:y,loadingRuralDistricts:C,ruralDistricts:w,onRuralDistrictsChanged:function(e){i.resetFields([t?[t,"villageId"]:"villageId"]),i.setFieldValue(t?[t,"villageId"]:"villageId",""),""!==e&&N.get(a.Z.locations.villages(e))},loadingVillages:D,villages:q}}}}]);
//# sourceMappingURL=105.b59a2281.chunk.js.map