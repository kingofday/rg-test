"use strict";(self.webpackChunkregional_water=self.webpackChunkregional_water||[]).push([[95],{1095:function(n,e,i){i.r(e),i.d(e,{default:function(){return h}});var t=i(6106),l=i(914),r=i(8993),o=i(177),a=i(5485),u=i(9530),d=i(2020),s=i(1413),c=i(9439),f=i(458),v=i(543),Z=i(184),m=function(n){n.data,n.form;var e,i,a,m=(0,d.$)().t,h=(0,v.Z)({autoCallUrl:u.Z.organizationLevel.tree,cachingLifeTimeInSeconds:60,mapper:function(n){var e=[];return n&&function n(i){e.push(i),i.nodes&&i.nodes.length&&i.nodes.forEach((function(e){return n((0,s.Z)((0,s.Z)({},e),{},{name:"".concat(i.name,"/").concat(e.name)}))}))}(n),e}}),p=(0,c.Z)(h,3),g=p[1],x=p[2];return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(r.Z.Item,{noStyle:!0,name:"id",children:(0,Z.jsx)(o.Z,{type:"hidden"})}),(0,Z.jsxs)(t.Z,{gutter:16,children:[(0,Z.jsx)(l.Z,{xs:24,sm:24,md:24,children:(0,Z.jsx)(r.Z.Item,{name:"name",label:m("name"),rules:[{required:!0,message:null!==(e=m("required"))&&void 0!==e?e:""}],children:(0,Z.jsx)(o.Z,{placeholder:null!==(i=m("name"))&&void 0!==i?i:""})})}),(0,Z.jsx)(l.Z,{xs:24,sm:24,md:24,children:(0,Z.jsx)(r.Z.Item,{name:"parentId",label:m("parent"),rules:[{required:!0,message:null!==(a=m("required"))&&void 0!==a?a:""}],children:(0,Z.jsx)(f.Z,{allowClear:!0,placeholder:m("parent"),options:null===x||void 0===x?void 0:x.map((function(n){return{label:n.name,value:n.id}})),loading:g})})})]})]})},h=function(){var n,e=(0,d.$)().t;return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(a.Z,{title:e("organizationLevel"),id:"organizationLevel",idProp:"id",EntryForm:m,filterUrl:u.Z.organizationLevel.list,findUrl:function(n){return u.Z.organizationLevel.find(n.id)},columns:[{title:e("name"),dataIndex:"name",key:"name"}],scrollX:300,deleteAction:{url:function(n){return u.Z.organizationLevel.delete(n.id)}},addUrl:u.Z.organizationLevel.add,editAction:{url:u.Z.organizationLevel.update},children:(0,Z.jsx)(t.Z,{gutter:[20,20],children:(0,Z.jsx)(l.Z,{xs:24,sm:12,children:(0,Z.jsx)(r.Z.Item,{name:"search",rules:[],children:(0,Z.jsx)(o.Z,{placeholder:null!==(n=e("search"))&&void 0!==n?n:""})})})})})})}},5485:function(n,e,i){i.d(e,{Z:function(){return M}});var t=i(4942),l=i(3433),r=i(1413),o=i(9439),a=i(4916),u=i(8993),d=i(7309),s=i(294),c=i(3099),f=i(4525),v=i(4021),Z=i(4661),m=i(5486),h=i(8467),p=i(2791),g=(0,p.createContext)({}),x=i(543),j=i(2020),y=i(502),b=i(5761),C=i(184),k=function(n){var e,i=(0,j.$)().t,t=(0,x.Z)({onSuccess:function(e){n.afterSelect(e)}}),l=(0,o.Z)(t,2),r=l[0],a=l[1];return(0,C.jsx)(d.Z,{loading:a,type:n.isMobile?"ghost":"primary",shape:n.isMobile?"default":"circle",icon:n.isMobile?void 0:(0,C.jsx)(Z.Z,{size:n.isMobile?20:10,name:"IoPencilOutline"}),onClick:function(){if(n.findUrl){var e="string"===typeof n.findUrl?"".concat(n.findUrl,"?").concat(n.idProp,"=").concat(n.record[n.idProp]):n.findUrl(n.record);r.get(e)}else n.afterSelect(n.record)},title:null!==(e=i("edit"))&&void 0!==e?e:"",children:n.isMobile?i("edit"):null})},S=function(n){var e=u.Z.useForm(),i=(0,o.Z)(e,1)[0];return(0,C.jsx)(v.Z,{destroyOnClose:!0,open:!0,onCancel:n.onCancel,title:n.title,onOk:function(){i.submit()},okButtonProps:{loading:n.loading},width:n.entryModalWidth,children:(0,C.jsx)(u.Z,{id:"entry-form",layout:"vertical",form:i,initialValues:n.initialValues,onFinish:n.onEntrySubmit,autoComplete:"off",children:(0,C.jsx)(n.EntryForm,{form:i,data:n.initialValues})})})},w=function(n){var e,i=(0,j.$)().t;return(0,C.jsx)(d.Z,{danger:!0,type:n.isMobile?"ghost":"primary",shape:n.isMobile?"default":"circle",icon:n.isMobile?void 0:(0,C.jsx)(Z.Z,{size:n.isMobile?20:10,name:"IoTrashOutline"}),onClick:n.onClick,title:null!==(e=i("delete"))&&void 0!==e?e:"",children:n.isMobile?i("delete"):null})},z=a.Z.Panel,M=function(n){var e,i,M,P=n.id,E=n.title,F=n.columns,I=n.idProp,U=n.filterUrl,L=n.findUrl,O=n.addUrl,V=n.initialValues,N=n.disablePaging,A=n.EntryForm,W=n.children,$=n.deleteAction,q=n.editAction,B=n.pageSize,T=void 0===B?15:B,D=n.handleSubmit,K=void 0===D||D,R=n.customActions,X=n.buttons,Y=n.scrollX,_=void 0===Y?"1500px":Y,H=n.filtersHeight,Q=n.scrollY,G=n.entryModalWidth,J=n.enableRowNumber,nn=void 0===J||J,en=(0,j.$)().t,tn=u.Z.useForm(),ln=(0,o.Z)(tn,1)[0],rn=(0,p.useState)(!1),on=(0,o.Z)(rn,2),an=on[0],un=on[1],dn=(0,p.useState)(!0),sn=(0,o.Z)(dn,2),cn=sn[0],fn=sn[1],vn=(0,p.useState)(null),Zn=(0,o.Z)(vn,2),mn=Zn[0],hn=Zn[1],pn=(0,p.useState)(null),gn=(0,o.Z)(pn,2),xn=gn[0],jn=gn[1],yn=(0,p.useState)(F),bn=(0,o.Z)(yn,2),Cn=bn[0],kn=bn[1],Sn=(0,p.useState)({page:1,pageSize:T}),wn=(0,o.Z)(Sn,2),zn=wn[0],Mn=wn[1],Pn=(0,p.useRef)(1),En=(0,x.Z)({initLoading:!0}),Fn=(0,o.Z)(En,4),In=Fn[0],Un=Fn[1],Ln=Fn[2],On=Fn[3],Vn=(0,x.Z)({onSuccess:function(n,e){_n(e)}}),Nn=(0,o.Z)(Vn,2),An=Nn[0],Wn=Nn[1],$n=(0,x.Z)({onSuccess:function(n,e){Hn(e?(0,r.Z)((0,r.Z)({},e),n):n)}}),qn=(0,o.Z)($n,2),Bn=qn[0],Tn=qn[1],Dn=(0,x.Z)({onSuccess:function(n,e){var i=I,t=null===e||void 0===e?void 0:e[i];t&&On((function(n){var e;return(0,r.Z)((0,r.Z)({},n),{},{totalEntitiesCount:null!==(e=null===n||void 0===n?void 0:n.totalEntitiesCount)&&void 0!==e?e:0,results:null===n||void 0===n?void 0:n.results.filter((function(n){return n[i]!==t}))})})),jn(null)}}),Kn=(0,o.Z)(Dn,2),Rn=Kn[0],Xn=Kn[1],Yn=(0,p.useMemo)((function(){return window.outerWidth<m.Z.breakpoints.xl}),[]),_n=function(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=I,t=null===n||void 0===n?void 0:n[i];t&&On((function(e){return(0,r.Z)((0,r.Z)({},e),{},{results:null===e||void 0===e?void 0:e.results.map((function(e){return e[i]===t?(0,r.Z)((0,r.Z)({},e),n):e}))})})),e&&un(!1)},Hn=function(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=I,t=null===n||void 0===n?void 0:n[i];t&&On((function(e){var i,t;return(0,r.Z)((0,r.Z)({},e),{},{totalEntitiesCount:null!==(i=null===e||void 0===e?void 0:e.totalEntitiesCount)&&void 0!==i?i:1,results:[n].concat((0,l.Z)(null!==(t=null===e||void 0===e?void 0:e.results)&&void 0!==t?t:[]))})})),e&&un(!1)},Qn=function(n){hn(n),un(!0)},Gn=function(n){jn(n)},Jn=(0,p.useMemo)((function(){var n;if((!R||!R.length)&&!q&&!$)return null;var e=(null!==(n=null===R||void 0===R?void 0:R.length)&&void 0!==n?n:0)+(q?1:0)+($?1:0);return{title:(0,C.jsx)(Z.Z,{name:"IoBuildOutline"}),align:"center",key:"actions",fixed:"right",width:Yn?30:25*e+8*(e-1)+40,dataIndex:"actions",render:function(n,e,i){if(Yn){var t=[];return q&&t.push({key:"edit",label:(0,C.jsx)(k,{findUrl:L,afterSelect:Qn,idProp:I,record:e,isMobile:!0})}),$&&t.push({key:"delete",label:(0,C.jsx)(w,{isMobile:!0,onClick:function(){return Gn(e)}})}),null!==R&&void 0!==R&&R.length&&(t=t.concat(R.map((function(i,t){var l;return{key:"action-"+t,label:i.renderer?i.renderer(n,e,On,Yn):(0,C.jsx)(d.Z,{type:Yn?"ghost":"primary",shape:Yn?"default":"circle",icon:(0,C.jsx)(Z.Z,{size:Yn?20:10,name:null!==(l=i.icon)&&void 0!==l?l:"BsDash"}),onClick:function(){var n;return null===(n=i.action)||void 0===n?void 0:n.call(i,e,On)}},t)}})))),(0,C.jsx)(s.Z,{menu:{items:t},children:(0,C.jsx)("a",{onClick:function(n){return n.preventDefault()},children:(0,C.jsx)(Z.Z,{name:"FaEllipsisV"})})})}return(0,C.jsxs)(c.Z,{className:"actions",children:[!!q&&(0,C.jsx)(k,{findUrl:L,afterSelect:Qn,idProp:I,record:e}),!!$&&(0,C.jsx)(w,{onClick:function(){return Gn(e)}}),!!R&&R.map((function(i,t){var l;return i.renderer?i.renderer(n,e,On):(0,C.jsx)(d.Z,{type:"primary",shape:"circle",icon:(0,C.jsx)(Z.Z,{size:10,name:null!==(l=i.icon)&&void 0!==l?l:"BsDash"}),onClick:function(){var n;return null===(n=i.action)||void 0===n?void 0:n.call(i,e,On)}},t)}))]})}}}),[R]),ne=function(n){n.stopPropagation(),hn(null),un(!0)},ee=function(n){In.get("".concat(U,"?").concat(h.Z.convertToQueryString((0,r.Z)((0,r.Z)({},zn),n)).toString()))},ie=function(){hn(null),un(!1)};(0,p.useEffect)((function(){ee(ln.getFieldsValue())}),[]);var te=(0,p.useMemo)((function(){var n=Jn?[].concat((0,l.Z)(Cn.filter((function(n){return"rowNumber"!==n.key})).map((function(n){return(0,r.Z)((0,r.Z)({},n),{},{fixed:window.outerWidth<m.Z.breakpoints.lg?void 0:n.fixed})}))),[Jn]):Cn.filter((function(n){return"rowNumber"!==n.key}));return nn&&n.unshift({key:"rowNumber",title:"#",width:80,fixed:window.outerWidth<m.Z.breakpoints.lg?void 0:"left",render:function(n,e,i){return(0,C.jsx)("span",{children:(Pn.current-1)*zn.pageSize+i+1})}}),n}),[Cn]);return(0,C.jsx)(g.Provider,{value:{form:ln},children:(0,C.jsxs)(b.Z,{id:P,title:E,className:"admin",children:[!Yn&&!!O&&(0,C.jsx)("div",{children:(0,C.jsx)(d.Z,{icon:(0,C.jsx)(Z.Z,{name:"IoAdd"}),onClick:ne,type:"primary",size:"small",title:null!==(e=en("add"))&&void 0!==e?e:"",children:(0,C.jsx)("small",{children:en("add")})})}),(0,C.jsx)(a.Z,{defaultActiveKey:["filters"],onChange:function(){return fn((function(n){return!n}))},children:(0,C.jsx)(z,{header:en("filters"),extra:O&&Yn?(0,C.jsx)(d.Z,{icon:(0,C.jsx)(Z.Z,{name:"IoAdd"}),onClick:ne,type:"primary",size:"small",title:null!==(i=en("add"))&&void 0!==i?i:"",children:(0,C.jsx)("small",{children:en("add")})}):null,children:(0,C.jsx)(u.Z,{name:"filters",form:ln,initialValues:V,onFinish:function(n){Mn((function(n){return(0,r.Z)((0,r.Z)({},n),{},{page:1})})),Pn.current=1,(F.length!==Cn.length||F.some((function(n){return!Cn.map((function(n){return n.key})).includes(n.key)})))&&kn(F),ee((0,r.Z)((0,r.Z)({},n),{},{page:1}))},autoComplete:"off",children:(0,C.jsxs)(c.Z,{direction:"horizontal",children:[W,(0,C.jsxs)(u.Z.Item,{className:"flex-row-end btns",children:[null===X||void 0===X?void 0:X.map((function(n){return(0,C.jsx)(d.Z,{type:"primary",htmlType:"button",style:n.style,className:n.className,onClick:function(e){return n.onClick(e,ln.getFieldsValue())},children:n.children})})),(0,C.jsx)(d.Z,{type:"primary",htmlType:"submit",children:en("search")})]})]})})},"filters")}),(0,C.jsx)(f.Z,{loading:Un,direction:"rtl",rowKey:I,columns:te,dataSource:null===Ln?void 0:(0,l.Z)(Ln.results),onChange:function(n,e,i){var t,l,o,a;Mn({page:null!==(t=n.current)&&void 0!==t?t:1,pageSize:null!==(l=n.pageSize)&&void 0!==l?l:15}),Pn.current=null!==(o=n.current)&&void 0!==o?o:1,ee((0,r.Z)((0,r.Z)({},ln.getFieldsValue()),{},{page:null!==(a=n.current)&&void 0!==a?a:1}))},scroll:{x:_,y:Q?Q+(cn?0:null!==H&&void 0!==H?H:0):Q},pagination:N?void 0:{pageSize:zn.pageSize,current:zn.page,total:null===Ln||void 0===Ln?void 0:Ln.totalEntitiesCount}},"table-".concat(I)),!!A&&(K?an?(0,C.jsx)(S,{EntryForm:A,onCancel:ie,onEntrySubmit:function(n){q&&mn?An.put(q.url,n):O&&!mn&&Bn.post(O,n)},entryModalWidth:G,title:en(mn?"edit":"add"),initialValues:null!==(M=null!==mn&&void 0!==mn?mn:V)&&void 0!==M?M:void 0,loading:Tn||Wn}):null:an?(0,C.jsx)(v.Z,{destroyOnClose:!0,open:!0,onCancel:ie,title:en(mn?"edit":"add"),footer:null,width:G,children:(0,C.jsx)(A,{onCancel:function(){return un(!1)},data:mn,onSuccess:mn?_n:Hn})}):null),(0,C.jsx)(y.Z,{open:!!xn,loading:Xn,onOk:function(){if(xn&&$){var n,e;if("string"!==typeof(null===$||void 0===$?void 0:$.url)&&~(null===$||void 0===$?void 0:$.url(xn).indexOf("?")))throw new Error("delete url cannot have query strings");var i="string"===typeof(null===$||void 0===$?void 0:$.url)?"".concat($.url):null===$||void 0===$?void 0:$.url(xn);Rn.delete(i,(0,t.Z)({},null!==(n=null===$||void 0===$?void 0:$.sendingProp)&&void 0!==n?n:I,xn[null!==(e=null===$||void 0===$?void 0:$.sendingProp)&&void 0!==e?e:I]))}},onCancel:function(){return jn(null)}})]})})}},502:function(n,e,i){var t=i(3655),l=i(4021),r=i(2020),o=i(184),a=t.Z.Paragraph;e.Z=function(n){var e=n.open,i=n.onOk,t=n.loading,u=n.onCancel,d=n.title,s=n.message,c=(0,r.$)().t;return(0,o.jsx)(l.Z,{title:null!==d&&void 0!==d?d:c("delete"),open:e,onOk:i,onCancel:u,okButtonProps:{danger:!0,loading:t},children:(0,o.jsx)(a,{children:s||c("areYouSure")})})}}}]);
//# sourceMappingURL=95.9bae727e.chunk.js.map